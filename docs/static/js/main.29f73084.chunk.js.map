{"version":3,"sources":["images/wowza-logo.svg","images/file_copy-24px.svg","images/mic-32px.svg","images/mic-off-32px.svg","images/videocam-32px.svg","images/videocam-off-32px.svg","reducers/webrtcMeetingReducer.js","webrtc/mungeSDP.js","reducers/errorsReducer.js","actions/errorsActions.js","constants/PublishOptions.js","reducers/mediaReducer.js","actions/mediaActions.js","reducers/compositeSettingsReducer.js","actions/compositeSettingsActions.js","reducers/playSettingsReducer.js","actions/playSettingsActions.js","reducers/publishSettingsReducer.js","actions/publishSettingsActions.js","reducers/webrtcPublishReducer.js","actions/webrtcPublishActions.js","reducers/webrtcPlayReducer.js","actions/webrtcPlayActions.js","actions/webrtcMeetingActions.js","reducers/rootReducer.js","store.js","components/shell/Nav.js","components/shell/Errors.js","components/composite/CompositeLiveIndicator.js","constants/CompositeOptions.js","utils/CookieUtils.js","components/composite/CompositePublishSettingsForm.js","constants/CookieName.js","components/composite/Compositor.js","components/shared/ShareLink.js","components/composite/InputLayoutSettingsForm.js","webrtc/startPublish.js","webrtc/stopPublish.js","components/composite/CompositePublisher.js","components/composite/Composite.js","webrtc/stopPlay.js","webrtc/startPlay.js","components/play/Player.js","components/play/PlaySettingsForm.js","components/play/Play.js","components/meeting/PeerPlayer.js","components/meeting/Meeter.js","components/meeting/MeetingSettingsForm.js","components/meeting/Meeting.js","webrtc/getUserMedia.js","webrtc/getDisplayScreen.js","components/media/CompositorUserMedia.js","constants/ErrorMessages.js","webrtc/getDevices.js","components/media/Devices.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","newPeerStreams","SDPOutput","videoChoice","audioChoice","videoIndex","audioIndex","initialState","message","show","errorsReducer","state","action","type","videoCodecs","value","name","videoConstraintsByFrameSize","width","min","ideal","max","height","frameRate","exact","stream","undefined","canvas","audioTracksMap","videoTracksMap","displayScreenTrack","cameras","microphones","constraints","video","audio","gotPermissions","devicesLoaded","devicesLoading","userMediaLoaded","userMediaLoading","mediaReducer","mediaTracksState","camerasState","deviceId","length","newConstraints","JSON","parse","stringify","microphonesState","devicesState","userMediaState","layout","signalingURL","applicationName","streamName","streamInfo","audioBitrate","audioCodec","audioTrack","audioTrackDeviceId","videoBitrate","videoTrack","videoTrack1DeviceId","videoTrack2DeviceId","videoCodec","videoFrameRate","videoFrameSize","userData","publishStart","publishStarting","publishStop","publishStopping","compositeReducer","frameState","publishFlagsState","playStart","playStarting","playStop","playStopping","playSettingsReducer","playFlagsState","publishSettingsReducer","videoTrackState","enabled","audioTrackState","websocket","peerConnection","peerConnectionVideoSender","peerConnectionAudioSender","connected","webrtcPublishReducer","webrtcPlayReducer","checkAddPeerStream","peerStreams","Promise","resolve","reject","console","log","filter","includes","peerStream","checkRemovePeerStream","availableStreams","find","webrtcMeetingReducer","slice","push","rootReducer","combineReducers","errors","media","compositeSettings","playSettings","publishSettings","webrtcPublish","webrtcPlay","webrtcMeeting","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","Nav","className","id","href","src","wowzaLogo","alt","Errors","dispatch","useDispatch","useSelector","aria-label","onClick","aria-hidden","CompositeLiveIndicator","compositePublishUrlParameters","getCookieValues","cookieName","cookieValues","cookieString","Cookies","get","unescape","CompositePublishSettingsForm","useState","initialized","setInitialized","useEffect","qs","QueryString","location","search","savedValues","param","compositePublishUrlParametersPrefix","values","i","set","escape","htmlFor","maxLength","placeholder","onChange","e","target","readOnly","PublishOptions","map","codec","key","fillSize","srcSize","dstSize","scale","heightRatio","widthRatio","fillRatio","Math","fitSize","pipOffset","canvasSize","pipSize","padding","paddingVert","paddingHorz","top","left","Compositor","running","setRunning","video1Element","useRef","video1ScaleMode","video2Element","canvasElement","layoutRef","current","video1Stream","MediaStream","addTrack","srcObject","video2Stream","audioContextRef","AudioContext","webkitAudioContext","oscillatorRef","renderLoop","useCallback","createOscillator","onended","start","stop","video1","video2","context","getContext","fillStyle","fillRect","video1Full","video1Pip","video2Full","video2Pip","video1Size","videoWidth","videoHeight","video2Size","readyState","HAVE_ENOUGH_DATA","renderSize","xOffset","yOffset","drawImage","offset","renderFrame","resume","then","canvasStream","captureStream","getTracks","ref","autoPlay","style","display","ShareLink","props","settings","parameters","prefix","queryParams","baseUrl","origin","pathname","text","navigator","clipboard","writeText","showAlert","select","document","execCommand","alert","copyTextToClipboard","stringifyUrl","url","query","fileImage","InputLayoutSettingsForm","cam","label","mic","disabled","browserDetails","adapter","deliverCheckLine","profile","line","lineInUse","output","outputs","split","position","checkLine","startsWith","res","number","isNaN","currentString","getrtpMapID","findid","RegExp","found","match","peerConnectionCreateOfferSuccess","description","callbacks","sdp","mungeData","sdpStr","sdpLines","sdpSection","hitMID","sdpStrRet","sdpIndex","sdpLine","videoLine","done","rtcpSize","localeCompare","addVideo","audioLine","addAudio","browser","audioMLines","indexOf","rtpmapID","toLowerCase","Number","mungeSDPPublish","setLocalDescription","send","sessionId","getStreamInfo","param1","catch","error","newError","peerConnectionOnError","onError","websocketOnMessage","event","msgJSON","data","msgStatus","websocketOnError","sdpData","setRemoteDescription","RTCSessionDescription","iceCandidates","index","addIceCandidate","RTCIceCandidate","startPublish","WebSocket","binaryType","addEventListener","RTCPeerConnection","onnegotiationneeded","createOffer","onconnectionstatechange","currentTarget","connectionState","onConnectionStateChange","audioSender","videoSender","onSetSenders","onSetPeerConnection","websocketOnOpen","onSetWebsocket","stopPublish","close","onPublishStopped","CompositePublisher","result","senders","Composite","stopPlay","onPlayStopped","repeaterRetryCount","setTimeout","websocketSendPlayGetOffer","streamInfoResponse","profileLevelId","substr","constraint","level","newProfileLevelId","toString","replace","mungeSDPPlay","createAnswer","peerConnectionSetRemoteDescriptionSuccess","err","startPlay","ontrack","onPeerConnectionOnTrack","Player","videoElement","track","kind","newStream","playsInline","muted","controls","playUrlParametersMap","PlaySettingsForm","paramKey","Play","PeerPlayer","setPeerConnection","setConnected","setAudioTrack","setVideoTrack","playerType","mounted","Meeter","pollingInterval","setPollingInterval","msgCommand","WebRTCMeetingActions","setInterval","clearInterval","MeetingSettingsForm","audioTracks","getAudioTracks","videoTracks","getVideoTracks","videoImage","videoOffImage","muteImage","unmuteImage","Meeting","getUserMedia","mediaDevices","getDisplayStream","getDisplaySuccess","getDisplayMedia","mediaSource","getPermissions","a","default","loadUserMediaForCameras","newVideoTracksMap","onScreenShareEnded","loadDisplayScreenTrack","getDisplayScreen","screenTrack","loadUserMediaForMicrophones","newAudioTracksMap","CompositorUserMedia","publishVideoTrack1DeviceId","compositeVideoTrack1DeviceId","videoTracksMapRef","audioTracksMapRef","ErrorMessages","loadingUserMedia","loadingUserDevices","getDevices","enumerateDevices","devices","resolveObj","loadDevices","Devices","App","basename","process","REACT_APP_BASENAME","path","Boolean","hostname","ReactDOM","render","StrictMode","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.29f73084.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/wowza-logo.c9001ef3.svg\";","module.exports = __webpack_public_path__ + \"static/media/file_copy-24px.af0d3034.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-32px.e86ba651.svg\";","module.exports = __webpack_public_path__ + \"static/media/mic-off-32px.725ec334.svg\";","module.exports = __webpack_public_path__ + \"static/media/videocam-32px.fc4b7780.svg\";","module.exports = __webpack_public_path__ + \"static/media/videocam-off-32px.342a0624.svg\";","import * as WebRTCMeetingActions from '../actions/webrtcMeetingActions';\n\nconst initialState = {\n  websocket: undefined,\n  peerConnection: undefined,\n  peerConnectionVideoSender: undefined,\n  peerConnectionAudioSender: undefined,\n  connected: false,\n  peerStreams: []\n}\nlet newPeerStreams;\nconst webrtcMeetingReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case WebRTCMeetingActions.SET_WEBRTC_MEETING_WEBSOCKET:\n      return { ...state, websocket:action.websocket };\n    case WebRTCMeetingActions.SET_WEBRTC_MEETING_PEERCONNECTION:\n      return { ...state, peerConnection:action.peerConnection };\n    case WebRTCMeetingActions.SET_WEBRTC_MEETING_CONNECTED:\n      return { ...state, connected:action.connected };\n    case WebRTCMeetingActions.SET_WEBRTC_MEETING_PEERCONNECTION_AUDIO_SENDER:\n      return { ...state, peerConnectionAudioSender:action.peerConnectionAudioSender};\n    case WebRTCMeetingActions.SET_WEBRTC_MEETING_PEERCONNECTION_VIDEO_SENDER:\n      return { ...state, peerConnectionVideoSender:action.peerConnectionVideoSender};\n    case WebRTCMeetingActions.ADD_PEER_VIDEO_PLAYER:\n      newPeerStreams =  state.peerStreams.slice();\n      newPeerStreams.push(action.peerStream);\n      return { ...state, peerStreams:newPeerStreams};\n    case WebRTCMeetingActions.REMOVE_PEER_VIDEO_PLAYER:\n      console.log(\"reducer: \"+action);\n      newPeerStreams =  state.peerStreams.slice();\n      newPeerStreams = newPeerStreams.filter(stream => !(stream.streamName === action.streamName))\n      console.log(newPeerStreams);\n      return { ...state, peerStreams:newPeerStreams};\n    case WebRTCMeetingActions.REMOVE_ALL_PLAYERS:\n      return { ...state, peerStreams:[]};\n    default:\n      return state\n  }\n}\n\nexport default webrtcMeetingReducer;\n","/*\n * This code and all components (c) Copyright 2019-2020, Wowza Media Systems, LLC. All rights reserved.\n * This code is licensed pursuant to the BSD 3-Clause License.\n */\n\nimport adapter from 'webrtc-adapter';\n\nconst browserDetails = adapter.browserDetails;\n\nlet SDPOutput;\nlet videoChoice;\nlet audioChoice;\nlet videoIndex;\nlet audioIndex;\n\nfunction addAudio(sdpStr, audioLine) {\n  let sdpLines = sdpStr.split(/\\r\\n/);\n  let sdpStrRet = '';\n  let done = false;\n\n  for (let sdpIndex in sdpLines) {\n    let sdpLine = sdpLines[sdpIndex];\n\n    if (sdpLine.length <= 0)\n      continue;\n\n    sdpStrRet += sdpLine;\n    sdpStrRet += '\\r\\n';\n\n    if ('a=rtcp-mux'.localeCompare(sdpLine) === 0 && done === false) {\n      sdpStrRet += audioLine;\n      done = true;\n    }\n  }\n  return sdpStrRet;\n}\n\nfunction addVideo(sdpStr, videoLine) {\n  let sdpLines = sdpStr.split(/\\r\\n/);\n  let sdpStrRet = '';\n  let done = false;\n\n  let rtcpSize = false;\n\n  for (let sdpIndex in sdpLines) {\n    let sdpLine = sdpLines[sdpIndex];\n\n    if (sdpLine.length <= 0)\n      continue;\n\n    if (sdpLine.includes(\"a=rtcp-rsize\")) {\n      rtcpSize = true;\n    }\n\n  }\n\n  for (let sdpIndex in sdpLines) {\n    let sdpLine = sdpLines[sdpIndex];\n\n    sdpStrRet += sdpLine;\n    sdpStrRet += '\\r\\n';\n\n    if (('a=rtcp-rsize'.localeCompare(sdpLine) === 0) && done === false && rtcpSize === true) {\n      sdpStrRet += videoLine;\n      done = true;\n    }\n\n    if ('a=rtcp-mux'.localeCompare(sdpLine) === 0 && done === true && rtcpSize === false) {\n      sdpStrRet += videoLine;\n      done = true;\n    }\n\n    if ('a=rtcp-mux'.localeCompare(sdpLine) === 0 && done === false && rtcpSize === false) {\n      done = true;\n    }\n\n  }\n  return sdpStrRet;\n}\n\n// Filter codec offerings\nfunction deliverCheckLine(profile, type) {\n  for (let line in SDPOutput) {\n    let lineInUse = SDPOutput[line];\n    if (lineInUse.includes(profile)) {\n      if (profile.includes(\"VP9\") || profile.includes(\"VP8\")) {\n        let output = \"\";\n        let outputs = lineInUse.split(/\\r\\n/);\n        for (let position in outputs) {\n          let transport = outputs[position];\n          // NOTE: This block of code is needed for WSE versions older than 4.8.5\n          // if (transport.indexOf(\"a=extmap\") !== -1 ||\n          //   transport.indexOf(\"transport-cc\") !== -1 ||\n          //   transport.indexOf(\"goog-remb\") !== -1 ||\n          //   transport.indexOf(\"nack\") !== -1) {\n          //   continue;\n          // }\n          output += transport;\n          output += \"\\r\\n\";\n        }\n\n        if (type.includes(\"audio\")) {\n          audioIndex = line;\n        }\n\n        if (type.includes(\"video\")) {\n          videoIndex = line;\n        }\n\n        return output;\n      }\n      if (type.includes(\"audio\")) {\n        audioIndex = line;\n      }\n\n      if (type.includes(\"video\")) {\n        videoIndex = line;\n      }\n\n      return lineInUse;\n    }\n  }\n  return '';\n}\n\nfunction checkLine(line) {\n  if (line.startsWith(\"a=rtpmap\") || line.startsWith(\"a=rtcp-fb\") || line.startsWith(\"a=fmtp\")) {\n    let res = line.split(\":\");\n\n    if (res.length > 1) {\n      let number = res[1].split(\" \");\n      if (!isNaN(number[0])) {\n        if (!number[1].startsWith(\"http\") && !number[1].startsWith(\"ur\")) {\n          let currentString = SDPOutput[number[0]];\n          if (!currentString) {\n            currentString = \"\";\n          }\n          currentString += line + \"\\r\\n\";\n          SDPOutput[number[0]] = currentString;\n          return false;\n        }\n      }\n    }\n  }\n\n  return true;\n}\n\nfunction getrtpMapID(line) {\n  let findid = new RegExp('a=rtpmap:(\\\\d+) (\\\\w+)/(\\\\d+)');\n  let found = line.match(findid);\n  return (found && found.length >= 3) ? found : null;\n}\n\nexport function mungeSDPPublish(sdpStr, mungeData) {\n\n  SDPOutput = {};\n  videoChoice = \"42e01f\";\n  audioChoice = \"opus\";\n  videoIndex = -1;\n  audioIndex = -1;\n\n  let sdpLines = sdpStr.split(/\\r\\n/);\n\n  let sdpSection = 'header';\n  let hitMID = false;\n  let sdpStrRet = '';\n\n  if (mungeData.videoCodec != null && mungeData.videoCodec !== '')\n    videoChoice = mungeData.videoCodec;\n  if (mungeData.audioCodec != null && mungeData.audioCodec !== '')\n    audioChoice = mungeData.audioCodec;\n\n  // Deliver the requested codecs\n  for (let sdpIndex in sdpLines) {\n    let sdpLine = sdpLines[sdpIndex];\n\n    if (sdpLine.length <= 0)\n      continue;\n\n    let doneCheck = checkLine(sdpLine);\n    if (!doneCheck)\n      continue;\n\n    sdpStrRet += sdpLine;\n    sdpStrRet += '\\r\\n';\n\n  }\n  sdpStrRet = addAudio(sdpStrRet, deliverCheckLine(audioChoice, \"audio\"));\n  sdpStrRet = addVideo(sdpStrRet, deliverCheckLine(videoChoice, \"video\"));\n  sdpStr = sdpStrRet;\n  sdpLines = sdpStr.split(/\\r\\n/);\n  sdpStrRet = '';\n\n  for (let sdpIndex in sdpLines) {\n    let sdpLine = sdpLines[sdpIndex];\n\n    if (sdpLine.length <= 0)\n      continue;\n\n    if (browserDetails.browser === 'chrome') {\n      let audioMLines;\n      if (sdpLine.indexOf(\"m=audio\") === 0 && audioIndex !== -1) {\n        audioMLines = sdpLine.split(\" \");\n        sdpStrRet += audioMLines[0] + \" \" + audioMLines[1] + \" \" + audioMLines[2] + \" \" + audioIndex + \"\\r\\n\";\n        continue;\n      }\n\n      if (sdpLine.indexOf(\"m=video\") === 0 && videoIndex !== -1) {\n        audioMLines = sdpLine.split(\" \");\n        sdpStrRet += audioMLines[0] + \" \" + audioMLines[1] + \" \" + audioMLines[2] + \" \" + videoIndex + \"\\r\\n\";\n        continue;\n      }\n    }\n\n    sdpStrRet += sdpLine;\n\n    if (sdpLine.indexOf(\"m=audio\") === 0) {\n      sdpSection = 'audio';\n      hitMID = false;\n    }\n    else if (sdpLine.indexOf(\"m=video\") === 0) {\n      sdpSection = 'video';\n      hitMID = false;\n    }\n    else if (sdpLine.indexOf(\"a=rtpmap\") === 0) {\n      sdpSection = 'bandwidth';\n      hitMID = false;\n    }\n\n    if (browserDetails.browser === 'chrome') {\n      if (sdpLine.indexOf(\"a=mid:\") === 0 || sdpLine.indexOf(\"a=rtpmap\") === 0) {\n        if (!hitMID) {\n          if ('audio'.localeCompare(sdpSection) === 0) {\n            if (mungeData.audioBitrate !== undefined) {\n              sdpStrRet += '\\r\\nb=CT:' + (mungeData.audioBitrate);\n              sdpStrRet += '\\r\\nb=AS:' + (mungeData.audioBitrate);\n            }\n            hitMID = true;\n          }\n          else if ('video'.localeCompare(sdpSection) === 0) {\n            if (mungeData.videoBitrate !== undefined) {\n              sdpStrRet += '\\r\\nb=CT:' + (mungeData.videoBitrate);\n              sdpStrRet += '\\r\\nb=AS:' + (mungeData.videoBitrate);\n              if (mungeData.videoFrameRate !== undefined) {\n                sdpStrRet += '\\r\\na=framerate:' + mungeData.videoFrameRate;\n              }\n            }\n            hitMID = true;\n          }\n          else if ('bandwidth'.localeCompare(sdpSection) === 0) {\n            let rtpmapID;\n            rtpmapID = getrtpMapID(sdpLine);\n            if (rtpmapID !== null) {\n              let match = rtpmapID[2].toLowerCase();\n              if (('vp9'.localeCompare(match) === 0) || ('vp8'.localeCompare(match) === 0) || ('h264'.localeCompare(match) === 0) ||\n                ('red'.localeCompare(match) === 0) || ('ulpfec'.localeCompare(match) === 0) || ('rtx'.localeCompare(match) === 0)) {\n                if (mungeData.videoBitrate !== undefined) {\n                  sdpStrRet += '\\r\\na=fmtp:' + rtpmapID[1] + ' x-google-min-bitrate=' + (mungeData.videoBitrate) + ';x-google-max-bitrate=' + (mungeData.videoBitrate);\n                }\n              }\n\n              if (('opus'.localeCompare(match) === 0) || ('isac'.localeCompare(match) === 0) || ('g722'.localeCompare(match) === 0) || ('pcmu'.localeCompare(match) === 0) ||\n                ('pcma'.localeCompare(match) === 0) || ('cn'.localeCompare(match) === 0)) {\n                if (mungeData.audioBitrate !== undefined) {\n                  sdpStrRet += '\\r\\na=fmtp:' + rtpmapID[1] + ' x-google-min-bitrate=' + (mungeData.audioBitrate) + ';x-google-max-bitrate=' + (mungeData.audioBitrate);\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    if (browserDetails.browser === 'firefox' || browserDetails.browser === 'safari') {\n      if ( sdpLine.indexOf(\"c=IN\") === 0 )\n      {\n        if ('audio'.localeCompare(sdpSection) === 0)\n        {\n          if (mungeData.audioBitrate !== '') {\n            sdpStrRet += \"\\r\\nb=TIAS:\"+(Number(mungeData.audioBitrate)*1000)+\"\\r\\n\";\n            sdpStrRet += \"b=AS:\"+(Number(mungeData.audioBitrate)*1000)+\"\\r\\n\";\n            sdpStrRet += \"b=CT:\"+(Number(mungeData.audioBitrate)*1000)+\"\\r\\n\";\n          }\n          continue;\n        }\n        if ('video'.localeCompare(sdpSection) === 0)\n        {\n          if (mungeData.videoBitrate !== '') {\n            sdpStrRet += \"\\r\\nb=TIAS:\"+(Number(mungeData.videoBitrate)*1000)+\"\\r\\n\";\n            sdpStrRet += \"b=AS:\"+(Number(mungeData.videoBitrate)*1000)+\"\\r\\n\";\n            sdpStrRet += \"b=CT:\"+(Number(mungeData.videoBitrate)*1000)+\"\\r\\n\";\n          }\n          continue;\n        }\n      }\n    }\n\n    sdpStrRet += '\\r\\n';\n  }\n  return sdpStrRet;\n}\n\nexport function mungeSDPPlay(sdpStr) {\n\n  // For greatest playback compatibility, \n  // force H.264 playback to constrained baseline (42e01f).\n\n  let sdpLines = sdpStr.split(/\\r\\n/);\n  let sdpStrRet = '';\n\n  for (var sdpIndex in sdpLines) {\n    var sdpLine = sdpLines[sdpIndex];\n\n    if (sdpLine.length === 0)\n      continue;\n\n    if (sdpLine.includes(\"profile-level-id\")) {\n      // The profile-level-id string has three parts: XXYYZZ, where\n      //   XX: 42 baseline, 4D main, 64 high\n      //   YY: constraint\n      //   ZZ: level ID\n      // Look for codecs higher than baseline and force downward.\n      let profileLevelId = sdpLine.substr(sdpLine.indexOf(\"profile-level-id\")+17,6);\n      let profile = Number('0x'+profileLevelId.substr(0,2));\n      let constraint = Number('0x'+profileLevelId.substr(2,2));\n      let level = Number('0x'+profileLevelId.substr(4,2));\n      if (profile > 0x42)\n      {\n        profile = 0x42;\n        constraint = 0xE0;\n        level = 0x1F;\n      }\n      if (constraint === 0x00)\n      {\n        constraint = 0xE0;\n      }\n      let newProfileLevelId = (\"00\" + profile.toString(16)).slice(-2).toLowerCase() +\n        (\"00\" + constraint.toString(16)).slice(-2).toLowerCase() +\n        (\"00\" + level.toString(16)).slice(-2).toLowerCase();\n\n      sdpLine = sdpLine.replace(profileLevelId,newProfileLevelId);\n    }\n\n    sdpStrRet += sdpLine;\n    sdpStrRet += '\\r\\n';\n  }\n\n  return sdpStrRet;  \n}\n","import * as ErrorsActions from '../actions/errorsActions';\n\nconst initialState = {\n  message: '',\n  show: false\n}\n\nconst errorsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case ErrorsActions.SET_ERROR_MESSAGE:\n      return { message:action.message, show: true };\n    case ErrorsActions.HIDE_ERROR_PANEL:\n      return { message: '', show: false };\n    default:\n      return state\n  }\n}\n\nexport default errorsReducer;\n","export const SET_ERROR_MESSAGE='SET_ERROR_MESSAGE';\nexport const HIDE_ERROR_PANEL='HIDE_ERROR_PANEL';","export const videoCodecs = [\n  { value:\"VP8\", name:\"VP8\" },\n  { value:\"VP9\", name:\"VP9\" },\n  { value:\"42e01f\", name:\"H.264\" }\n];\n\nexport const videoFrameSizes = [\n  { value:\"default\", name:\"Default\" },\n  { value:\"1920x1080\", name:\"1920x1080\" },\n  { value:\"1280x720\", name:\"1280x720\" },\n  { value:\"800x600\", name:\"800x600\" },\n  { value:\"640x360\", name:\"640x360\" }\n];\n\nexport const videoConstraintsByFrameSize = {\n  \"default\":   {\n    width: { min: \"640\", ideal: \"1280\", max: \"1920\" },\n    height: { min: \"360\", ideal: \"720\", max: \"1080\" },\n    frameRate: \"30\"\n  },\n  \"1920x1080\":   {\n    width: { exact: \"1920\" },\n    height: { exact: \"1080\" },\n    frameRate: \"30\"\n  },\n  \"1280x720\": {\n    width: { exact: \"1280\" },\n    height: { exact: \"720\" },\n    frameRate: \"30\"\n  },\n  \"800x600\": {\n    width: { exact: \"800\" },\n    height: { exact: \"600\" },\n    frameRate: \"30\"\n  },\n  \"640x360\": {\n    width: { exact: \"640\" },\n    height: { exact: \"360\" },\n    frameRate: \"30\"\n  }\n}\n\nexport const publishUrlParametersPrefix = \"\";\n\nexport const publishUrlParameters = [\n  \"signalingURL\",\n  \"applicationName\",\n  \"streamName\",\n  \"audioBitrate\",\n  \"audioCodec\",\n  \"videoBitrate\",\n  \"videoCodec\",\n  \"videoFrameRate\",\n  \"videoFrameSize\"\n]","import * as MediaActions from '../actions/mediaActions';\nimport { videoConstraintsByFrameSize } from '../constants/PublishOptions';\n\nconst initialState = {\n  stream: undefined,\n  canvas: undefined,\n  audioTracksMap: {},\n  videoTracksMap: {},\n  displayScreenTrack: undefined,\n  cameras: [],\n  microphones: [],\n  constraints: {video:videoConstraintsByFrameSize['default'],audio:true},\n  gotPermissions: false,\n  devicesLoaded: false,\n  devicesLoading: false,\n  userMediaLoaded: false,\n  userMediaLoading: false\n}\n\nconst mediaReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case MediaActions.SET_MEDIA_CANVAS:\n      return { ...state, canvas:action.canvas };\n    case MediaActions.SET_MEDIA_CONSTRAINTS:\n      return { ...state, constraints:action.constraints };\n    case MediaActions.SET_MEDIA_STREAM:\n      return { ...state, stream:action.stream };\n    case MediaActions.SET_MEDIA_TRACKS:\n      let mediaTracksState = { ...state };\n      if (action.videoTracksMap != null) mediaTracksState.videoTracksMap = action.videoTracksMap;\n      if (action.audioTracksMap != null) mediaTracksState.audioTracksMap = action.audioTracksMap;\n      if (action.displayScreenTrack != null) mediaTracksState.displayScreenTrack = action.displayScreenTrack;\n      return mediaTracksState;\n    case MediaActions.SET_MEDIA_GOT_PERMISSIONS:\n      return { ...state, gotPermissions:action.gotPermissions };\n    case MediaActions.SET_MEDIA_CAMERAS:\n      let camerasState = { ...state };\n      camerasState.cameras = action.cameras;\n      if (camerasState.constraints.video.deviceId == null && action.cameras.length > 0)\n      {\n        let newConstraints = JSON.parse(JSON.stringify(camerasState.constraints));\n        newConstraints.video.deviceId = action.cameras[0].deviceId;\n        camerasState.constraints = newConstraints;\n      }\n      return camerasState;\n    case MediaActions.SET_MEDIA_MICROPHONES:\n      let microphonesState = { ...state };\n      microphonesState.microphones = action.microphones;\n      if (microphonesState.constraints.audio.deviceId == null && action.microphones.length > 0)\n      {\n        let newConstraints = JSON.parse(JSON.stringify(microphonesState.constraints));\n        if (typeof newConstraints.audio === 'boolean') newConstraints.audio = {};\n        newConstraints.audio.deviceId = action.microphones[0].deviceId;\n        microphonesState.constraints = newConstraints;\n      }\n      return microphonesState;\n    case MediaActions.SET_MEDIA_DEVICES_STATE:\n      let devicesState = { ...state };\n      if (action.devicesLoaded != null) devicesState.devicesLoaded = action.devicesLoaded;\n      if (action.devicesLoading != null) devicesState.devicesLoading = action.devicesLoading;\n      return devicesState;\n    case MediaActions.SET_MEDIA_USERMEDIA_STATE:\n      let userMediaState = { ...state };\n      if (action.userMediaLoaded != null) userMediaState.userMediaLoaded = action.userMediaLoaded;\n      if (action.userMediaLoading != null) userMediaState.userMediaLoading = action.userMediaLoading;\n      return userMediaState;\n    case MediaActions.SET_MEDIA_SCREEN_SHARE_ENDED:\n      return { ...state, displayScreenTrack:undefined };\n    default:\n      return state\n  }\n}\n\nexport default mediaReducer;\n","import { videoConstraintsByFrameSize } from \"../constants/PublishOptions\";\n\nexport const SET_MEDIA_CANVAS=\"SET_MEDIA_CANVAS\";\nexport const SET_MEDIA_CONSTRAINTS=\"SET_MEDIA_CONSTRAINTS\";\nexport const SET_MEDIA_STREAM=\"SET_MEDIA_STREAM\";\nexport const SET_MEDIA_TRACKS=\"SET_MEDIA_TRACKS\";\nexport const SET_MEDIA_SCREEN_SHARE_ENDED=\"SET_MEDIA_SCREEN_SHARE_ENDED\";\nexport const SET_MEDIA_GOT_PERMISSIONS=\"SET_MEDIA_GOT_PERMISSIONS\";\nexport const SET_MEDIA_CAMERAS=\"SET_MEDIA_CAMERAS\";\nexport const SET_MEDIA_MICROPHONES=\"SET_MEDIA_MICROPHONES\";\nexport const SET_MEDIA_DEVICES_STATE=\"SET_MEDIA_DEVICES_STATE\";\nexport const SET_MEDIA_USERMEDIA_STATE=\"SET_MEDIA_USERMEDIA_STATE\";\n\nexport const setCameraFrameSizeAndRate = (constraints, videoFrameSize, videoFrameRate) => {\n\n  let newConstraints = JSON.parse(JSON.stringify(constraints));\n  if (typeof newConstraints.video === 'boolean')\n  {\n    newConstraints.video = {};\n  }\n  newConstraints.video.width = videoConstraintsByFrameSize[videoFrameSize].width;\n  newConstraints.video.height = videoConstraintsByFrameSize[videoFrameSize].height;\n  newConstraints.video.frameRate = videoFrameRate;\n\n  return {\n    type:SET_MEDIA_CONSTRAINTS,\n    constraints:newConstraints\n  };\n}\n\nexport const setCamera = (constraints, deviceId) => {\n\n  let newConstraints = JSON.parse(JSON.stringify(constraints));\n  if (typeof newConstraints.video === 'boolean')\n  {\n    newConstraints.video = {};\n  }\n  newConstraints.video = Object.assign({},newConstraints.video,{deviceId: deviceId});\n\n  return {\n    type:SET_MEDIA_CONSTRAINTS,\n    constraints: newConstraints\n  };\n}\n\nexport const setMicrophone = (constraints, deviceId) => {\n\n  let newConstraints = JSON.parse(JSON.stringify(constraints));\n  if (typeof newConstraints.audio === 'boolean')\n  {\n    newConstraints.audio = {};\n  }\n  newConstraints.audio = Object.assign({},newConstraints.audio,{deviceId: deviceId});\n\n  return {\n    type:SET_MEDIA_CONSTRAINTS,\n    constraints: newConstraints\n  };\n\n}","import * as compositeSettingsActions from '../actions/compositeSettingsActions';\n\nconst initialState = {\n  layout: 0,\n  signalingURL: '',\n  applicationName: '',\n  streamName: '',\n  streamInfo: undefined,\n  audioBitrate: '64',\n  audioCodec: 'opus',\n  audioTrack: undefined,\n  audioTrackDeviceId: '',\n  videoBitrate: '3500',\n  videoTrack: undefined,\n  videoTrack1DeviceId: '',\n  videoTrack2DeviceId: '',\n  videoCodec: 'VP8',\n  videoFrameRate: '30',\n  videoFrameSize: 'default',\n  userData: undefined,\n  publishStart: false,\n  publishStarting: false,\n  publishStop: false,\n  publishStopping: false\n}\n\nconst compositeReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case compositeSettingsActions.SET_COMPOSITE_LAYOUT:\n      return { ...state, layout:action.layout };\n    case compositeSettingsActions.SET_COMPOSITE_SIGNALING_URL:\n      return { ...state, signalingURL:action.signalingURL };\n    case compositeSettingsActions.SET_COMPOSITE_APPLICATION_NAME:\n      return { ...state, applicationName:action.applicationName };\n    case compositeSettingsActions.SET_COMPOSITE_STREAM_NAME:\n      return { ...state, streamName:action.streamName };\n    case compositeSettingsActions.SET_COMPOSITE_STREAM_INFO:\n      return { ...state, streamInfo:action.streamInfo };\n    case compositeSettingsActions.SET_COMPOSITE_AUDIO_BITRATE:\n      return { ...state, audioBitrate:action.audioBitrate };\n    case compositeSettingsActions.SET_COMPOSITE_AUDIO_CODEC:\n      return { ...state, audioCodec:action.audioCodec };\n    case compositeSettingsActions.SET_COMPOSITE_AUDIO_TRACK:\n      return { ...state, audioTrack:action.audioTrack };\n    case compositeSettingsActions.SET_COMPOSITE_AUDIO_TRACK_DEVICEID:\n      return { ...state, audioTrackDeviceId:action.audioTrackDeviceId };\n    case compositeSettingsActions.SET_COMPOSITE_VIDEO_BITRATE:\n      return { ...state, videoBitrate:action.videoBitrate };\n    case compositeSettingsActions.SET_COMPOSITE_VIDEO_CODEC:\n      return { ...state, videoCodec:action.videoCodec };\n    case compositeSettingsActions.SET_COMPOSITE_VIDEO_FRAME_SIZE_AND_RATE:\n      let frameState = { ...state };\n      if (action.videoFrameSize != null) frameState.videoFrameSize = action.videoFrameSize;\n      if (action.videoFrameRate != null) frameState.videoFrameRate = action.videoFrameRate;\n      return frameState;\n    case compositeSettingsActions.SET_COMPOSITE_VIDEO_TRACK:\n      return { ...state, videoTrack:action.videoTrack };\n    case compositeSettingsActions.SET_COMPOSITE_VIDEO_TRACK1_DEVICEID:\n      return { ...state, videoTrack1DeviceId:action.videoTrack1DeviceId };\n    case compositeSettingsActions.SET_COMPOSITE_VIDEO_TRACK2_DEVICEID:\n      return { ...state, videoTrack2DeviceId:action.videoTrack2DeviceId };\n    case compositeSettingsActions.SET_COMPOSITE_USER_DATA:\n      return { ...state, userData:action.userData };\n    case compositeSettingsActions.SET_COMPOSITE_FLAGS:\n      let publishFlagsState = { ...state };\n      if (action.publishStart != null) publishFlagsState.publishStart = action.publishStart;\n      if (action.publishStarting != null) publishFlagsState.publishStarting = action.publishStarting;\n      if (action.publishStop != null) publishFlagsState.publishStop = action.publishStop;\n      if (action.publishStopping != null) publishFlagsState.publishStopping = action.publishStopping;\n      return publishFlagsState;\n    default:\n      return state\n  }\n}\n\nexport default compositeReducer;","export const SET_COMPOSITE_LAYOUT='SET_COMPOSITE_LAYOUT';\nexport const SET_COMPOSITE_SIGNALING_URL='SET_COMPOSITE_SIGNALING_URL';\nexport const SET_COMPOSITE_APPLICATION_NAME='SET_COMPOSITE_APPLICATION_NAME';\nexport const SET_COMPOSITE_STREAM_NAME='SET_COMPOSITE_STREAM_NAME';\nexport const SET_COMPOSITE_STREAM_INFO='SET_COMPOSITE_STREAM_INFO';\nexport const SET_COMPOSITE_AUDIO_BITRATE='SET_COMPOSITE_AUDIO_BITRATE';\nexport const SET_COMPOSITE_AUDIO_CODEC='SET_COMPOSITE_AUDIO_CODEC';\nexport const SET_COMPOSITE_AUDIO_TRACK='SET_COMPOSITE_AUDIO_TRACK';\nexport const SET_COMPOSITE_AUDIO_TRACK_DEVICEID='SET_COMPOSITE_AUDIO_TRACK_DEVICEID';\nexport const SET_COMPOSITE_VIDEO_BITRATE='SET_COMPOSITE_VIDEO_BITRATE';\nexport const SET_COMPOSITE_VIDEO_CODEC='SET_COMPOSITE_VIDEO_CODEC';\nexport const SET_COMPOSITE_VIDEO_FRAME_SIZE_AND_RATE='SET_COMPOSITE_VIDEO_FRAME_SIZE_AND_RATE';\nexport const SET_COMPOSITE_VIDEO_TRACK='SET_COMPOSITE_VIDEO_TRACK';\nexport const SET_COMPOSITE_VIDEO_TRACK1_DEVICEID='SET_COMPOSITE_VIDEO_TRACK1_DEVICEID';\nexport const SET_COMPOSITE_VIDEO_TRACK2_DEVICEID='SET_COMPOSITE_VIDEO_TRACK2_DEVICEID';\nexport const SET_COMPOSITE_USER_DATA='SET_COMPOSITE_USER_DATA';\nexport const SET_COMPOSITE_FLAGS='SET_COMPOSITE_FLAGS';\n\nexport const startPublish = () => {\n  return {\n    type: SET_COMPOSITE_FLAGS,\n    publishStart: true\n  }\n}\n\nexport const stopPublish = () => {\n  return {\n    type: SET_COMPOSITE_FLAGS,\n    publishStop: true\n  }\n}","import * as PlaySettingsActions from '../actions/playSettingsActions';\n\nconst initialState = {\n  signalingURL: '',\n  applicationName: '',\n  streamName: '',\n  playStart: false,\n  playStarting: false,\n  playStop: false,\n  playStopping: false\n}\n\nconst playSettingsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case PlaySettingsActions.SET_PLAY_SIGNALING_URL:\n      return { ...state, signalingURL:action.signalingURL };\n    case PlaySettingsActions.SET_PLAY_APPLICATION_NAME:\n      return { ...state, applicationName:action.applicationName };\n    case PlaySettingsActions.SET_PLAY_STREAM_NAME:\n      return { ...state, streamName:action.streamName };\n    case PlaySettingsActions.SET_PLAY_FLAGS:\n      let playFlagsState = { ...state };\n      if (action.playStart != null) playFlagsState.playStart = action.playStart;\n      if (action.playStarting != null) playFlagsState.playStarting = action.playStarting;\n      if (action.playStop != null) playFlagsState.playStop = action.playStop;\n      if (action.playStopping != null) playFlagsState.playStopping = action.playStopping;\n      return playFlagsState;\n    default:\n      return state\n  }\n}\n\nexport default playSettingsReducer;\n","export const SET_PLAY_SIGNALING_URL='SET_PLAY_SIGNALING_URL';\nexport const SET_PLAY_APPLICATION_NAME='SET_PLAY_APPLICATION_NAME';\nexport const SET_PLAY_STREAM_NAME='SET_PLAY_STREAM_NAME';\nexport const SET_PLAY_FLAGS='SET_PLAY_FLAGS';\n\nexport const startPlay = () => {\n  return {\n    type: SET_PLAY_FLAGS,\n    playStart: true\n  }\n}\n\nexport const stopPlay = () => {\n  return {\n    type: SET_PLAY_FLAGS,\n    playStop: true\n  }\n}","import * as PublishSettingsActions from '../actions/publishSettingsActions';\n\nconst initialState = {\n  signalingURL: '',\n  applicationName: '',\n  streamName: '',\n  streamInfo: undefined,\n  audioBitrate: '64',\n  audioCodec: 'opus',\n  audioTrack: {},\n  audioTrackDeviceId: '',\n  videoBitrate: '3500',\n  videoTrack: {},\n  videoTrack1DeviceId: '',\n  videoTrack2DeviceId: '',\n  videoCodec: 'VP8',\n  videoFrameRate: '30',\n  videoFrameSize: 'default',\n  userData: undefined,\n  publishStart: false,\n  publishStarting: false,\n  publishStop: false,\n  publishStopping: false,\n}\n\nconst publishSettingsReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case PublishSettingsActions.SET_PUBLISH_SIGNALING_URL:\n      return { ...state, signalingURL:action.signalingURL };\n    case PublishSettingsActions.SET_PUBLISH_APPLICATION_NAME:\n      return { ...state, applicationName:action.applicationName };\n    case PublishSettingsActions.SET_PUBLISH_STREAM_NAME:\n      return { ...state, streamName:action.streamName };\n    case PublishSettingsActions.SET_PUBLISH_STREAM_INFO:\n      return { ...state, streamInfo:action.streamInfo };\n    case PublishSettingsActions.SET_PUBLISH_AUDIO_BITRATE:\n      return { ...state, audioBitrate:action.audioBitrate };\n    case PublishSettingsActions.SET_PUBLISH_AUDIO_CODEC:\n      return { ...state, audioCodec:action.audioCodec };\n    case PublishSettingsActions.SET_PUBLISH_AUDIO_TRACK:\n      return { ...state, audioTrack:action.audioTrack };\n    case PublishSettingsActions.SET_PUBLISH_AUDIO_TRACK_DEVICEID:\n      return { ...state, audioTrackDeviceId:action.audioTrackDeviceId };\n    case PublishSettingsActions.SET_PUBLISH_VIDEO_BITRATE:\n      return { ...state, videoBitrate:action.videoBitrate };\n    case PublishSettingsActions.SET_PUBLISH_VIDEO_CODEC:\n      return { ...state, videoCodec:action.videoCodec };\n    case PublishSettingsActions.SET_PUBLISH_VIDEO_FRAME_SIZE_AND_RATE:\n      let frameState = { ...state };\n      if (action.videoFrameSize != null) frameState.videoFrameSize = action.videoFrameSize;\n      if (action.videoFrameRate != null) frameState.videoFrameRate = action.videoFrameRate;\n      return frameState;\n    case PublishSettingsActions.SET_PUBLISH_VIDEO_TRACK:\n      return { ...state, videoTrack:action.videoTrack };\n    case PublishSettingsActions.SET_PUBLISH_VIDEO_TRACK1_DEVICEID:\n      return { ...state, videoTrack1DeviceId:action.videoTrack1DeviceId };\n    case PublishSettingsActions.SET_PUBLISH_VIDEO_TRACK2_DEVICEID:\n      return { ...state, videoTrack2DeviceId:action.videoTrack2DeviceId };\n    case PublishSettingsActions.SET_PUBLISH_USER_DATA:\n      return { ...state, userData:action.userData };\n    case PublishSettingsActions.SET_PUBLISH_FLAGS:\n      let publishFlagsState = { ...state };\n      if (action.publishStart != null) publishFlagsState.publishStart = action.publishStart;\n      if (action.publishStarting != null) publishFlagsState.publishStarting = action.publishStarting;\n      if (action.publishStop != null) publishFlagsState.publishStop = action.publishStop;\n      if (action.publishStopping != null) publishFlagsState.publishStopping = action.publishStopping;\n      return publishFlagsState;\n    case PublishSettingsActions.TOGGLE_VIDEO_ENABLED:\n      let videoTrackState = { ...state }\n      videoTrackState.videoTrack.enabled = !videoTrackState.videoTrack.enabled\n      return videoTrackState\n    case PublishSettingsActions.TOGGLE_AUDIO_ENABLED:\n      let audioTrackState = { ...state }\n      audioTrackState.audioTrack.enabled = !audioTrackState.audioTrack.enabled\n      return audioTrackState\n    default:\n      return state\n  }\n}\n\nexport default publishSettingsReducer;\n","export const SET_PUBLISH_SIGNALING_URL='SET_PUBLISH_SIGNALING_URL';\nexport const SET_PUBLISH_APPLICATION_NAME='SET_PUBLISH_APPLICATION_NAME';\nexport const SET_PUBLISH_STREAM_NAME='SET_PUBLISH_STREAM_NAME';\nexport const SET_PUBLISH_STREAM_INFO='SET_PUBLISH_STREAM_INFO';\nexport const SET_PUBLISH_AUDIO_BITRATE='SET_PUBLISH_AUDIO_BITRATE';\nexport const SET_PUBLISH_AUDIO_CODEC='SET_PUBLISH_AUDIO_CODEC';\nexport const SET_PUBLISH_AUDIO_TRACK='SET_PUBLISH_AUDIO_TRACK';\nexport const SET_PUBLISH_AUDIO_TRACK_DEVICEID='SET_PUBLISH_AUDIO_TRACK_DEVICEID';\nexport const SET_PUBLISH_VIDEO_BITRATE='SET_PUBLISH_VIDEO_BITRATE';\nexport const SET_PUBLISH_VIDEO_CODEC='SET_PUBLISH_VIDEO_CODEC';\nexport const SET_PUBLISH_VIDEO_FRAME_SIZE_AND_RATE='SET_PUBLISH_VIDEO_FRAME_SIZE_AND_RATE';\nexport const SET_PUBLISH_VIDEO_TRACK='SET_PUBLISH_VIDEO_TRACK';\nexport const SET_PUBLISH_VIDEO_TRACK1_DEVICEID='SET_PUBLISH_VIDEO_TRACK1_DEVICEID';\nexport const SET_PUBLISH_VIDEO_TRACK2_DEVICEID='SET_PUBLISH_VIDEO_TRACK2_DEVICEID';\nexport const SET_PUBLISH_USER_DATA='SET_PUBLISH_USER_DATA';\nexport const SET_PUBLISH_FLAGS='SET_PUBLISH_FLAGS';\nexport const TOGGLE_VIDEO_ENABLED='TOGGLE_VIDEO_ENABLED';\nexport const TOGGLE_AUDIO_ENABLED='TOGGLE_AUDIO_ENABLED';\n\nexport const startPublish = () => {\n  return {\n    type: SET_PUBLISH_FLAGS,\n    publishStart: true\n  }\n}\n\nexport const stopPublish = () => {\n  return {\n    type: SET_PUBLISH_FLAGS,\n    publishStop: true\n  }\n}\n","import * as WebRTCPublishActions from '../actions/webrtcPublishActions';\n\nconst initialState = {\n  websocket: undefined,\n  peerConnection: undefined,\n  peerConnectionVideoSender: undefined,\n  peerConnectionAudioSender: undefined,\n  connected: false\n}\n\nconst webrtcPublishReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case WebRTCPublishActions.SET_WEBRTC_PUBLISH_WEBSOCKET:\n      return { ...state, websocket:action.websocket };\n    case WebRTCPublishActions.SET_WEBRTC_PUBLISH_PEERCONNECTION:\n      return { ...state, peerConnection:action.peerConnection };\n    case WebRTCPublishActions.SET_WEBRTC_PUBLISH_CONNECTED:\n      return { ...state, connected:action.connected };\n    case WebRTCPublishActions.SET_WEBRTC_PUBLISH_PEERCONNECTION_AUDIO_SENDER:\n      return { ...state, peerConnectionAudioSender:action.peerConnectionAudioSender};\n    case WebRTCPublishActions.SET_WEBRTC_PUBLISH_PEERCONNECTION_VIDEO_SENDER:\n      return { ...state, peerConnectionVideoSender:action.peerConnectionVideoSender};\n    default:\n      return state\n  }\n}\n\nexport default webrtcPublishReducer;\n","export const SET_WEBRTC_PUBLISH_WEBSOCKET=\"SET_WEBRTC_PUBLISH_WEBSOCKET\";\nexport const SET_WEBRTC_PUBLISH_PEERCONNECTION=\"SET_WEBRTC_PUBLISH_PEERCONNECTION\";\nexport const SET_WEBRTC_PUBLISH_PEERCONNECTION_AUDIO_SENDER=\"SET_WEBRTC_PUBLISH_PEERCONNECTION_AUDIO_SENDER\";\nexport const SET_WEBRTC_PUBLISH_PEERCONNECTION_VIDEO_SENDER=\"SET_WEBRTC_PUBLISH_PEERCONNECTION_VIDEO_SENDER\";\nexport const SET_WEBRTC_PUBLISH_CONNECTED=\"SET_WEBRTC_PUBLISH_CONNECTED\";","import * as WebRTCPlayActions from '../actions/webrtcPlayActions';\n\nconst initialState = {\n  websocket: undefined,\n  peerConnection: undefined,\n  audioTrack: undefined,\n  videoTrack: undefined,\n  connected: false\n}\n\nconst webrtcPlayReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case WebRTCPlayActions.SET_WEBRTC_PLAY_WEBSOCKET:\n      return { ...state, websocket:action.websocket };\n    case WebRTCPlayActions.SET_WEBRTC_PLAY_PEERCONNECTION:\n      return { ...state, peerConnection:action.peerConnection };\n    case WebRTCPlayActions.SET_WEBRTC_PLAY_AUDIO_TRACK:\n      return { ...state, audioTrack: action.audioTrack };\n    case WebRTCPlayActions.SET_WEBRTC_PLAY_VIDEO_TRACK:\n      return { ...state, videoTrack: action.videoTrack };\n    case WebRTCPlayActions.SET_WEBRTC_PLAY_CONNECTED:\n      return { ...state, connected:action.connected };\n    default:\n      return state\n  }\n}\n\nexport default webrtcPlayReducer;\n","export const SET_WEBRTC_PLAY_WEBSOCKET=\"SET_WEBRTC_PLAY_WEBSOCKET\";\nexport const SET_WEBRTC_PLAY_PEERCONNECTION=\"SET_WEBRTC_PLAY_PEERCONNECTION\";\nexport const SET_WEBRTC_PLAY_CONNECTED=\"SET_WEBRTC_PLAY_CONNECTED\";\nexport const SET_WEBRTC_PLAY_AUDIO_TRACK='SET_WEBRTC_PLAY_AUDIO_TRACK';\nexport const SET_WEBRTC_PLAY_VIDEO_TRACK='SET_WEBRTC_PLAY_VIDEO_TRACK';\n","export const SET_WEBRTC_MEETING_WEBSOCKET=\"SET_WEBRTC_MEETING_WEBSOCKET\";\nexport const SET_WEBRTC_MEETING_PEERCONNECTION=\"SET_WEBRTC_MEETING_PEERCONNECTION\";\nexport const SET_WEBRTC_MEETING_PEERCONNECTION_AUDIO_SENDER=\"SET_WEBRTC_MEETING_PEERCONNECTION_AUDIO_SENDER\";\nexport const SET_WEBRTC_MEETING_PEERCONNECTION_VIDEO_SENDER=\"SET_WEBRTC_MEETING_PEERCONNECTION_VIDEO_SENDER\";\nexport const SET_WEBRTC_MEETING_CONNECTED=\"SET_WEBRTC_MEETING_CONNECTED\";\nexport const ADD_PEER_VIDEO_PLAYER=\"ADD_PEER_VIDEO_PLAYER\";\nexport const REMOVE_PEER_VIDEO_PLAYER=\"REMOVE_PEER_VIDEO_PLAYER\";\nexport const REMOVE_ALL_PLAYERS=\"REMOVE_ALL_PLAYERS\";\n\n// Peer streams is the list from the store\nexport const checkAddPeerStream = (peerStreams, streamName) => {\n  return new Promise((resolve,reject) => {\n    // it's not in peer streams so add it\n    console.log(\"checking add\");\n    if(peerStreams.filter(stream => stream.streamName.includes(streamName)).length === 0 ){\n      console.log(\"adding: \"+streamName);\n      resolve({type:ADD_PEER_VIDEO_PLAYER,peerStream:{streamName: streamName}});\n    }\n  })\n}\n\n// available streams is the list from WSE\nexport const checkRemovePeerStream = (availableStreams,streamName) => {\n  return new Promise((resolve,reject) => {\n    // if it's in peer streams but not availableStreams then remove it\n    console.log(\"checking remove\");\n    if(!availableStreams.find((stream) => stream.streamName.includes(streamName))){\n      console.log(\"removing: \"+streamName);\n      resolve({type: REMOVE_PEER_VIDEO_PLAYER,streamName: streamName})\n    }\n  })\n}\n","\nimport { combineReducers } from 'redux';\nimport errors from './errorsReducer';\nimport media from './mediaReducer';\nimport compositeSettings from './compositeSettingsReducer';\nimport playSettings from './playSettingsReducer';\nimport publishSettings from './publishSettingsReducer';\nimport webrtcPublish from './webrtcPublishReducer';\nimport webrtcPlay from './webrtcPlayReducer';\nimport webrtcMeeting from './webrtcMeetingReducer';\n\nconst rootReducer = combineReducers({\n  errors,\n  media,\n  compositeSettings,\n  playSettings,\n  publishSettings,\n  webrtcPublish,\n  webrtcPlay,\n  webrtcMeeting\n})\n\nexport default rootReducer;\n","import { createStore } from 'redux'\nimport rootReducer from './reducers/rootReducer'\n\nconst store = createStore(\n  rootReducer,\n  window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__()\n)\n\nexport default store;","import React from 'react';\nimport wowzaLogo from '../../images/wowza-logo.svg'\n\nconst Nav = () => {\n\n  return (\n    <nav className=\"navbar navbar-expand-sm navbar-light bg-light pb-3 pb-md-2\" id=\"top-nav\">\n      <a className=\"navbar-brand\" href=\"https://www.wowza.com\"><img className=\"noll\"  src={wowzaLogo} alt=\"Wowza Media Systems\" /></a>\n      <ul className=\"navbar-nav mr-auto-lg\">\n        <li className=\"nav-item page\">\n          <a href=\"https://www.wowza.com/developer/webrtc/dev-view-publish\">\n            Publish\n          </a>\n          <span></span>\n        </li>\n        <li className=\"nav-item page\">\n          <a href=\"https://www.wowza.com/developer/webrtc/dev-view-play\">\n            Play\n          </a>\n          <span></span>\n        </li>\n        <li className=\"nav-item page active\">\n            Composite\n          <span></span>\n        </li>\n      </ul>\n      <ul className=\"navbar-nav ml-auto d-none d-md-flex\">\n        <li className=\"nav-item mr-3\">\n          <a href=\"https://www.wowza.com/docs/wowza-streaming-engine-product-articles\">Docs</a>\n        </li>\n        <li className=\"nav-item mr-3\">\n          <a href=\"https://www.wowza.com/developer\">Developer Portal</a>\n        </li>\n      </ul>\n    </nav>\n  );\n}\n\nexport default Nav;\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { HIDE_ERROR_PANEL } from '../../actions/errorsActions';\n\nconst Errors = () => {\n\n  const dispatch = useDispatch();\n  const errors = useSelector( (state) => state.errors );\n\n  if (errors.show === false) {\n    return null;\n  }\n\n  return (\n    <div className=\"row justify-content-center mt-3\" id=\"error-panel\">\n      <div className=\"col-10 alert alert-danger alert-dismissible p-2\">\n        <button id=\"error-panel-close\" type=\"button\" className=\"close\" aria-label=\"Close\" onClick={()=>dispatch({type:HIDE_ERROR_PANEL})}>\n          <span aria-hidden=\"true\">&times;</span>\n        </button>\n        <div id=\"error-messages\">{ errors.message }</div>\n      </div>\n    </div>\n  );\n}\n\nexport default Errors;","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nconst CompositeLiveIndicator = () => {\n\n  const webrtcPublish = useSelector ((state) => state.webrtcPublish);\n\n  if (!webrtcPublish.connected)\n    return null;\n    \n  return (\n    <div id=\"video-live-indicator\">\n      <span id=\"video-live-indicator-live\" className=\"badge badge-pill badge-danger\">LIVE</span>\n    </div>\n  );\n}\n\nexport default CompositeLiveIndicator;","export const compositePublishUrlParametersPrefix = \"composite.\";\n\nexport const compositePublishUrlParameters = [\n  \"signalingURL\",\n  \"applicationName\",\n  \"streamName\",\n  \"audioBitrate\",\n  \"audioCodec\",\n  \"videoBitrate\",\n  \"videoCodec\"\n]","import Cookies from 'js-cookie';\n\nexport const getCookieValues = (cookieName) => {\n  let cookieValues = {};\n  let cookieString = Cookies.get(cookieName);\n  if (cookieString != null)\n    cookieValues = JSON.parse(unescape(cookieString));\n  return cookieValues;\n}\n\nexport const setCookieValues = (cookieName, values) => {\n  Cookies.set(cookieName,escape(JSON.stringify(values)));\n}","import React, { useEffect, useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport QueryString from 'query-string';\n\nimport * as compositeSettingsActions from '../../actions/compositeSettingsActions';\nimport * as PublishOptions from '../../constants/PublishOptions';\nimport { compositePublishUrlParameters, compositePublishUrlParametersPrefix } from '../../constants/CompositeOptions';\nimport { getCookieValues, setCookieValues } from '../../utils/CookieUtils';\nimport CookieName from '../../constants/CookieName';\n\nconst CompositePublishSettingsForm = () => {\n\n  const dispatch = useDispatch();\n  const [ initialized, setInitialized ] = useState(false);\n  const compositeSettings = useSelector ((state) => state.compositeSettings);\n\n  // load composite publish settings from cookie and URL on mount\n  useEffect(() => {\n\n    let cookieValues = getCookieValues(CookieName);\n    let qs = QueryString.parse(window.location.search);\n    let savedValues = { ...cookieValues, ...qs };\n\n    for (let param in savedValues)\n    {\n      switch(param)\n      {\n        case (compositePublishUrlParametersPrefix+'signalingURL'):\n          dispatch({type:compositeSettingsActions.SET_COMPOSITE_SIGNALING_URL,signalingURL:savedValues[param]});\n          break;\n        case (compositePublishUrlParametersPrefix+'applicationName'):\n          dispatch({type:compositeSettingsActions.SET_COMPOSITE_APPLICATION_NAME,applicationName:savedValues[param]});\n          break;\n        case (compositePublishUrlParametersPrefix+'streamName'):\n          dispatch({type:compositeSettingsActions.SET_COMPOSITE_STREAM_NAME,streamName:savedValues[param]});\n          break;\n        case (compositePublishUrlParametersPrefix+'audioBitrate'):\n          dispatch({type:compositeSettingsActions.SET_COMPOSITE_AUDIO_BITRATE,audioBitrate:savedValues[param]});\n          break;\n        case (compositePublishUrlParametersPrefix+'audioCodec'):\n          dispatch({type:compositeSettingsActions.SET_COMPOSITE_AUDIO_CODEC,audioCodec:savedValues[param]});\n          break;\n        case (compositePublishUrlParametersPrefix+'videoBitrate'):\n          dispatch({type:compositeSettingsActions.SET_COMPOSITE_VIDEO_BITRATE,videoBitrate:savedValues[param]});\n          break;\n        case (compositePublishUrlParametersPrefix+'videoCodec'):\n          dispatch({type:compositeSettingsActions.SET_COMPOSITE_VIDEO_CODEC,videoCodec:savedValues[param]});\n          break;\n        default:\n      }\n    }\n    setInitialized(true);\n  },[dispatch]);\n\n  // save values to Cookie\n  useEffect(() => {\n\n    let cookieValues = getCookieValues(CookieName);\n    for (let i = 0; i < compositePublishUrlParameters.length; i++)\n    {\n      if (compositeSettings[compositePublishUrlParameters[i]] != null)\n      {\n        cookieValues[compositePublishUrlParametersPrefix+compositePublishUrlParameters[i]] = compositeSettings[compositePublishUrlParameters[i]];\n      }\n    }\n    setCookieValues(CookieName,cookieValues);\n\n  },[compositeSettings]);\n\n  if (!initialized)\n    return null;\n\n  return (\n    <form id=\"publish-settings-form\">\n      <div className=\"row\">\n        <div className=\"col-12\">\n          <div className=\"form-group\">\n            <label htmlFor=\"sdpURL\">Signaling URL</label>\n            <input type=\"text\" \n              className=\"form-control\" \n              id=\"signalingURL\" \n              name=\"signalingURL\" \n              maxLength=\"1024\" \n              placeholder=\"wss://[ssl-certificate-domain-name]/webrtc-session.json\" \n              value={compositeSettings.signalingURL}\n              onChange={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_SIGNALING_URL,signalingURL:e.target.value})}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col-lg-6 col-sm-12\">\n          <div className=\"form-group\">\n            <label htmlFor=\"applicationName\">Application Name</label>\n            <input type=\"text\" \n              className=\"form-control\" \n              id=\"applicationName\" \n              name=\"applicationName\" \n              maxLength=\"256\" \n              value={compositeSettings.applicationName}\n              onChange={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_APPLICATION_NAME,applicationName:e.target.value})}\n            />\n          </div>\n        </div>\n        <div className=\"col-lg-6 col-sm-12\">\n          <div className=\"form-group\">\n            <label htmlFor=\"streamName\">Stream Name</label>\n            <input type=\"text\" \n              className=\"form-control\" \n              id=\"streamName\" \n              name=\"streamName\" \n              maxLength=\"256\" \n              value={compositeSettings.streamName}\n              onChange={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_STREAM_NAME,streamName:e.target.value})}\n            />\n          </div>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col-lg-6 col-sm-12\">\n          <div className=\"form-group\">\n            <label htmlFor=\"audioBitrate\">Audio Bitrate</label>\n            <div className=\"input-group\">\n              <input type=\"number\" \n                className=\"form-control\" \n                id=\"audioBitrate\" \n                name=\"audioBitrate\" \n                value={compositeSettings.audioBitrate}\n                onChange={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_AUDIO_BITRATE,audioBitrate:e.target.value})}\n                />\n              <div className=\"input-group-append\">\n                <span className=\"input-group-text\">Kbps</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"col-lg-6 col-sm-12\">\n          <div className=\"form-group\">\n            <label htmlFor=\"audioCodec\">Audio Codec</label>\n            <div className=\"input-group\">\n              <select className=\"form-control\" id=\"audioCodec\" name=\"audioCodec\" value=\"opus\" readOnly>\n                <option value=\"opus\">Opus</option>\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col-lg-6 col-sm-12\">\n          <div className=\"form-group\">\n            <label htmlFor=\"videoBitrate\">Video Bitrate</label>\n            <div className=\"input-group\">\n              <input type=\"number\" \n                className=\"form-control\" \n                id=\"videoBitrate\" \n                name=\"videoBitrate\" \n                value={compositeSettings.videoBitrate}\n                onChange={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_VIDEO_BITRATE,videoBitrate:e.target.value})}\n              />\n              <div className=\"input-group-append\">\n                <span className=\"input-group-text\">Kbps</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"col-lg-6 col-sm-12\">\n          <div className=\"form-group\">\n            <label htmlFor=\"videoCodec\">Video Codec</label>\n            <div className=\"input-group\">\n              <select className=\"form-control\" \n                id=\"videoCodec\" \n                name=\"videoCodec\"\n                value={compositeSettings.videoCodec}\n                onChange={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_VIDEO_CODEC,videoCodec:e.target.value})}\n              >\n                { PublishOptions.videoCodecs.map((codec,key) => { \n                  return <option key={key} value={codec.value}>{codec.name}</option>\n                })}\n              </select>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  );\n}\n  \n  export default CompositePublishSettingsForm;","const CookieName = \"webrtcReactValues\";\nexport default CookieName;","import React, { useState, useEffect, useRef, useCallback } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport * as compositeSettingsActions from '../../actions/compositeSettingsActions';\n\n/*\n * layouts:\n * 0 -> video 1 full\n * 1 -> video 2 full\n * 2 -> video 1 full, video 2 pip top-right\n * 3 -> video 2 full, video 1 pip top-right\n * 4 -> video 1 full, video 2 pip top-left\n * 5 -> video 1 full, video 2 pip bottom-left\n * 6 -> video 1 full, video 2 pip bottom-right\n * 7 -> side-by-side\n */\n\n\nconst pipScale = (1/4);\nconst padding = (1/16);\n\nconst fillSize = (srcSize, dstSize, scale = 1) => {\n\n  let heightRatio = dstSize.height / srcSize.height;\n  let widthRatio = dstSize.width / srcSize.width;\n  let fillRatio = Math.max(heightRatio,widthRatio);\n  return {\n    width: srcSize.width * fillRatio * scale,\n    height: srcSize.height * fillRatio * scale\n  }\n}\n\nconst fitSize = (srcSize, dstSize, scale = 1) => {\n\n  let heightRatio = dstSize.height / srcSize.height;\n  let widthRatio = dstSize.width / srcSize.width;\n  let fillRatio = Math.min(heightRatio,widthRatio);\n  return {\n    width: srcSize.width * fillRatio * scale,\n    height: srcSize.height * fillRatio * scale\n  }\n}\n\nconst pipOffset = (layout, canvasSize, pipSize,padding) => {\n  \n  let paddingVert = canvasSize.height * padding;\n  let paddingHorz = canvasSize.width * padding;\n\n  // PIP Top-Right\n  if (layout === 2 || layout === 3) {\n    return {\n      top: paddingVert,\n      left: canvasSize.width - pipSize.width - paddingHorz\n    }\n  }\n  // PIP Top-Left\n  if (layout === 4) {\n    return {\n      top: paddingVert,\n      left: paddingHorz\n    }\n  }\n  // PIP Bottom-Left\n  if (layout === 5) {\n    return {\n      top: canvasSize.height - pipSize.height - paddingVert,\n      left: paddingHorz\n    }\n  }\n  // PIP Bottom-Right\n  if (layout === 6) {\n    return {\n      top: canvasSize.height - pipSize.height - paddingVert,\n      left: canvasSize.width - pipSize.width - paddingHorz\n    }\n  }\n\n  return { top:0, left:0 };\n}\n\n// Grab frames from video1 and video2, composite on the canvas\nconst renderFrame = (video1, video2, canvas, layout, video1ScaleMode) => {\n\n  let context = canvas.getContext('2d');\n\n  // set canvas size to 720p\n  canvas.width = 1280;\n  canvas.height = 720;\n\n  context.fillStyle = \"gray\";\n  context.fillRect(0, 0, canvas.width, canvas.height);\n\n  let video1Full = layout === 0 || layout === 2 || layout === 4 || layout === 5 || layout === 6;\n  let video1Pip = layout === 3;\n  let video2Full = layout === 1 || layout === 3;\n  let video2Pip = layout === 2 || layout === 4 || layout === 5 || layout === 6;\n\n  let canvasSize = { width: canvas.width, height: canvas.height };\n  let video1Size = { width: video1.videoWidth, height: video1.videoHeight };\n  let video2Size = { width: video2.videoWidth, height: video2.videoHeight };\n\n  // render video1 to fill canvas\n  if (video1Full && video1.readyState === video1.HAVE_ENOUGH_DATA) {\n    let renderSize = (video1ScaleMode === 'fill') ? fillSize(video1Size, canvasSize, 1) : fitSize(video1Size, canvasSize, 1);\n    let xOffset = (canvasSize.width - renderSize.width) / 2;\n    let yOffset = (canvasSize.height - renderSize.height) / 2;\n    context.drawImage(video1, xOffset, yOffset, renderSize.width, renderSize.height);\n  }\n\n  // render video2 to fill canvas\n  if (video2Full && video2.readyState === video2.HAVE_ENOUGH_DATA) {\n    let renderSize = fillSize(video2Size, canvasSize, 1);\n    let xOffset = (canvasSize.width - renderSize.width) / 2;\n    let yOffset = (canvasSize.height - renderSize.height) / 2;\n    context.drawImage(video2, xOffset, yOffset, renderSize.width, renderSize.height);\n  }\n\n  // render video1 as pip\n  if (video1Pip && video1.readyState === video1.HAVE_ENOUGH_DATA) {\n    let renderSize = fitSize(video1Size, canvasSize, pipScale);\n    let offset = pipOffset(layout,canvasSize,renderSize,padding);\n    context.drawImage(video1, offset.left, offset.top, renderSize.width , renderSize.height );\n  }\n\n  // render video2 as pip\n  if (video2Pip && video2.readyState === video2.HAVE_ENOUGH_DATA) {\n    let renderSize = fitSize(video2Size, canvasSize, pipScale);\n    let offset = pipOffset(layout,canvasSize,renderSize,padding);\n    context.drawImage(video2, offset.left, offset.top, renderSize.width , renderSize.height );\n  }\n\n  // 2-up\n  if (layout === 7) {\n    if (video1.readyState === video1.HAVE_ENOUGH_DATA) {\n      let renderSize = fitSize(video1Size, canvasSize, 0.5);\n      let xOffset = (canvasSize.width/2 - renderSize.width) / 2;\n      let yOffset = canvasSize.height / 2 - renderSize.height / 2;\n      context.drawImage(video1, xOffset, yOffset, renderSize.width, renderSize.height);\n    }\n    if (video2.readyState === video2.HAVE_ENOUGH_DATA) {\n      let renderSize = fitSize(video2Size, canvasSize, 0.5);\n      let xOffset = (canvasSize.width - renderSize.width) + ((canvasSize.width/2 - renderSize.width) / 2);\n      let yOffset = canvasSize.height / 2 - renderSize.height / 2;\n      context.drawImage(video2, xOffset, yOffset, renderSize.width, renderSize.height);\n    }\n  }\n\n}\n\nconst Compositor = () => {\n\n  // Using a local 'running' state allows a user gesture to start the rendering.\n  const [running, setRunning] = useState(false);\n\n  // Using useRef() lets us use local state without triggering React renders.\n  const video1Element = useRef(null);\n  const video1ScaleMode = useRef('fill');\n  const video2Element = useRef(null);\n  const canvasElement = useRef(null);\n  const layoutRef = useRef(null);\n\n  const dispatch = useDispatch();\n  const { videoTracksMap, displayScreenTrack, audioTracksMap } = useSelector ((state) => state.media);\n  const { videoTrack1DeviceId, videoTrack2DeviceId, audioTrackDeviceId, layout } = useSelector ((state) => state.compositeSettings);\n\n  layoutRef.current = layout;\n\n  // Handle videoTrack1 changes\n  useEffect(() => {\n    let video1Stream = undefined;\n    if (videoTrack1DeviceId === 'screen' && displayScreenTrack != null)\n    {\n      video1Stream = new MediaStream();\n      video1Stream.addTrack(displayScreenTrack);\n      video1ScaleMode.current = 'fit';\n    }\n    else if (videoTrack1DeviceId !== '' && videoTrack1DeviceId !== 'screen' && videoTracksMap[videoTrack1DeviceId] != null) \n    {\n      video1Stream = new MediaStream();\n      video1Stream.addTrack(videoTracksMap[videoTrack1DeviceId]);\n      video1ScaleMode.current = 'fill';\n    }\n    if (video1Element != null && video1Element.current != null)\n      video1Element.current.srcObject = video1Stream;\n\n  }, [videoTracksMap, videoTrack1DeviceId, video1Element, displayScreenTrack])\n\n  // Handle videoTrack2 changes\n  useEffect(() => {\n    let video2Stream = undefined;\n    if (videoTrack2DeviceId !== '' && videoTracksMap[videoTrack2DeviceId] != null)\n    {\n      video2Stream = new MediaStream();\n      video2Stream.addTrack(videoTracksMap[videoTrack2DeviceId]);\n    }\n    if (video2Element != null && video2Element.current != null)\n      video2Element.current.srcObject = video2Stream;\n\n  }, [videoTracksMap, videoTrack2DeviceId, video2Element]);\n\n  // Handle microphone changes\n  useEffect(() => {\n\n    let audioTrack = undefined;\n    if (audioTrackDeviceId !== '' && audioTracksMap[audioTrackDeviceId] != null)\n    {\n      audioTrack = audioTracksMap[audioTrackDeviceId];\n    }\n    if (audioTrack != null)\n    {\n      dispatch({type:compositeSettingsActions.SET_COMPOSITE_AUDIO_TRACK,audioTrack:audioTrack});\n    }\n  }, [dispatch, audioTracksMap, audioTrackDeviceId]);\n\n  // Handle layout changes\n  useEffect(() => {\n    layoutRef.current = layout;\n  }, [layout]);\n\n  // Set up canvas rendering loop.\n  // Using an audio oscillator instead of requestAnimationFrame allows us to keep streaming when backgrounded.\n  // Using useRef() lets us touch stateful objects without triggering React renders.\n\n  const audioContextRef = useRef(new (window.AudioContext || window.webkitAudioContext)());\n  const oscillatorRef = useRef();\n\n  const renderLoop = useCallback(() => {\n    if (video1Element.current != null && video2Element.current != null && canvasElement.current != null)\n    {\n      oscillatorRef.current = audioContextRef.current.createOscillator();\n      oscillatorRef.current.onended = () => { renderLoop(); };\n      oscillatorRef.current.start();\n      oscillatorRef.current.stop(1/30);\n      renderFrame(video1Element.current,video2Element.current,canvasElement.current,layoutRef.current,video1ScaleMode.current);\n    }\n  },[]);\n\n  // The audioContext will be suspended until a user gesture.\n  // In our case, start it when a video or audio track is selected.\n  // This also re-starts rendering when the component re-mounts from a react-router navigation.\n\n  useEffect(() => {\n    audioContextRef.current.resume().then(() => {\n      if (!running) {\n        setRunning(true);\n        renderLoop();\n      }\n    });\n  },[running,renderLoop,videoTrack1DeviceId,videoTrack2DeviceId,audioTrackDeviceId]);\n\n  // Set up canvas captureStream when component mounts.\n  useEffect(() => {\n    let canvasStream = canvasElement.current.captureStream(30);\n    dispatch({type:compositeSettingsActions.SET_COMPOSITE_VIDEO_TRACK,videoTrack:canvasStream.getTracks()[0]});\n  },[dispatch]);\n\n\n  return (\n    <>\n      <canvas ref={canvasElement} id=\"publisher-canvas\"></canvas>\n      <video ref={video1Element} id=\"publisher-video1\" autoPlay style={{display:'none'}}></video>\n      <video ref={video2Element} id=\"publisher-video2\" autoPlay style={{display:'none'}}></video>\n    </>\n  );\n}\n\nexport default Compositor;","import React from 'react';\nimport QueryString from 'query-string';\nimport fileImage from '../../images/file_copy-24px.svg'\n\nconst ShareLink = (props) => {\n\n  const settings= props.settings;\n  const parameters = props.parameters;\n  const prefix = props.prefix;\n\n  const copyTextToClipboard = (text,message) => {\n    if(text === null || text === undefined || text.length === 0){\n      alert(\"Copy failed :(\")\n      return\n    }\n\n    navigator.clipboard.writeText(text).then(() => {\n      showAlert()\n    }, () => {\n      /* clipboard write failed do it the ugly way */\n      text.select();\n      document.execCommand(\"copy\");\n      showAlert();\n    });\n\n    const showAlert = () => {\n      if(message){\n        alert(message);\n      }else{\n        alert(\"Copied!\")\n      }\n    }\n  }\n\n  const getLink = (e) => {\n    let queryParams = {};\n    for (let i = 0; i < parameters.length; i++)\n    {\n      if (settings[parameters[i]] != null)\n      {\n        queryParams[prefix+parameters[i]] = settings[parameters[i]];\n      }\n    }\n\n    let baseUrl = window.location.origin + window.location.pathname;\n    let qs = QueryString.stringifyUrl({url:baseUrl,query:queryParams});\n    copyTextToClipboard(qs);\n  }\n\n  return (\n    <button id={prefix+\"-share-link\"} type=\"button\" className=\"control-button mt-0\" onClick={getLink}>\n      <img alt=\"\" className=\"noll\" id={prefix+\"-share-img\"}  src={fileImage}/>\n    </button>\n  );\n}\n\nexport default ShareLink;\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport * as compositeSettingsActions from '../../actions/compositeSettingsActions';\nimport ShareLink from '../shared/ShareLink';\nimport { compositePublishUrlParameters, compositePublishUrlParametersPrefix } from '../../constants/CompositeOptions';\nimport './InputLayoutSettingsForm.css';\n\nconst InputLayoutSettingsForm = () => {\n\n  const dispatch = useDispatch();\n  const compositeSettings = useSelector ((state) => state.compositeSettings);\n  const { cameras, microphones } = useSelector ((state) => state.media);\n  const webrtcPublish = useSelector ((state) => state.webrtcPublish);\n\n  return (\n    <form id=\"composite-settings-form-2\">\n      <div className=\"row\">\n        <div className=\"col-md-4 col-sm-12\">\n          <div className=\"row\">\n            <div className=\"col-10\">\n              <div className=\"form-group\">\n                <label htmlFor=\"camera1-list-select\">\n                  Video Input 1\n                </label>\n                <select id=\"camera1-list-select\" className=\"form-control\"\n                  value={compositeSettings.videoTrack1DeviceId}\n                  onChange={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_VIDEO_TRACK1_DEVICEID,videoTrack1DeviceId:e.target.value})}\n                >\n                  <option value=''>None</option>\n                  { cameras.map((cam,key) => {\n                    return <option key={key} value={cam.deviceId}>{cam.label}</option>\n                  })}\n                  <option value='screen'>Screen Share</option>\n                </select>\n              </div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-10\">\n              <div className=\"form-group\">\n                <label htmlFor=\"camera2-list-select\">\n                  Video Input 2\n                </label>\n                <select id=\"camera2-list-select\" className=\"form-control\"\n                  value={compositeSettings.videoTrack2DeviceId}\n                  onChange={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_VIDEO_TRACK2_DEVICEID,videoTrack2DeviceId:e.target.value})}\n                >\n                  <option value=''>None</option>\n                  { cameras.map((cam,key) => {\n                    return <option key={key} value={cam.deviceId}>{cam.label}</option>\n                  })}\n                </select>\n              </div>\n            </div>\n          </div>\n          <div className=\"row\">\n            <div className=\"col-10\">\n              <div className=\"form-group\">\n                <label htmlFor=\"mic-list-select\">\n                  Microphone\n                </label>\n                <select id=\"mic-list-select\" className=\"form-control\"\n                  value={compositeSettings.audioTrackDeviceId}\n                  onChange={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_AUDIO_TRACK_DEVICEID,audioTrackDeviceId:e.target.value})}\n                >\n                  <option value=''>None</option>\n                  { microphones.map((mic,key) => {\n                    return <option key={key} value={mic.deviceId}>{mic.label}</option>\n                  })}\n                </select>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"col-md-8 col-sm-12\">\n          <label>\n            Layout\n          </label>\n          <div className=\"row composite-layout\">\n            <div className=\"col-lg-3 col-6 mb-4\">\n              <button id=\"composite-layout-0\" type=\"button\"\n                className={\"btn composite-layout-button\" + (compositeSettings.layout === 0 ? \" btn-outline-warning\" : \" btn-outline-secondary\") }\n                onClick={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_LAYOUT,layout:0})}>\n                  <span className=\"composite-layout-button-label\">1</span>\n              </button>\n            </div>\n            <div className=\"col-lg-3 col-6 mb-4\">\n              <button id=\"composite-layout-1\" type=\"button\"\n                className={\"btn composite-layout-button\" + (compositeSettings.layout === 1 ? \" btn-outline-warning\" : \" btn-outline-secondary\") }\n                onClick={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_LAYOUT,layout:1})}>\n                  <span className=\"composite-layout-button-label\">2</span>\n              </button>\n            </div>\n            <div className=\"col-lg-3 col-6 mb-4\">\n              <button id=\"composite-layout-2\" type=\"button\"\n                className={\"btn composite-layout-button\" + (compositeSettings.layout === 2 ? \" btn-outline-warning\" : \" btn-outline-secondary\") }\n                onClick={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_LAYOUT,layout:2})}>\n                  <div className=\"composite-layout-pip pip-top-right\">\n                    2\n                  </div>\n                  <span className=\"composite-layout-button-label\">1</span>\n              </button>\n            </div>\n            <div className=\"col-lg-3 col-6 mb-4\">\n              <button id=\"composite-layout-3\" type=\"button\"\n                className={\"btn composite-layout-button\" + (compositeSettings.layout === 3 ? \" btn-outline-warning\" : \" btn-outline-secondary\") }\n                onClick={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_LAYOUT,layout:3})}>\n                  <div className=\"composite-layout-pip pip-top-right\">\n                    1\n                  </div>\n                  <span className=\"composite-layout-button-label\">2</span>\n              </button>\n            </div>\n            <div className=\"col-lg-3 col-6 mb-4\">\n              <button id=\"composite-layout-4\" type=\"button\"\n                className={\"btn composite-layout-button\" + (compositeSettings.layout === 4 ? \" btn-outline-warning\" : \" btn-outline-secondary\") }\n                onClick={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_LAYOUT,layout:4})}>\n                  <div className=\"composite-layout-pip pip-top-left\">\n                    2\n                  </div>\n                  <span className=\"composite-layout-button-label\">1</span>\n              </button>\n            </div>\n            <div className=\"col-lg-3 col-6 mb-4\">\n              <button id=\"composite-layout-5\" type=\"button\"\n                className={\"btn composite-layout-button\" + (compositeSettings.layout === 5 ? \" btn-outline-warning\" : \" btn-outline-secondary\") }\n                onClick={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_LAYOUT,layout:5})}>\n                  <div className=\"composite-layout-pip pip-bottom-left\">\n                    2\n                  </div>\n                  <span className=\"composite-layout-button-label\">1</span>\n              </button>\n            </div>\n            <div className=\"col-lg-3 col-6 mb-4\">\n              <button id=\"composite-layout-6\" type=\"button\"\n                className={\"btn composite-layout-button\" + (compositeSettings.layout === 6 ? \" btn-outline-warning\" : \" btn-outline-secondary\") }\n                onClick={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_LAYOUT,layout:6})}>\n                  <div className=\"composite-layout-pip pip-bottom-right\">\n                    2\n                  </div>\n                  <span className=\"composite-layout-button-label\">1</span>\n              </button>\n            </div>\n            <div className=\"col-lg-3 col-6 mb-4\">\n              <button id=\"composite-layout-7\" type=\"button\"\n                className={\"btn composite-layout-button\" + (compositeSettings.layout === 7 ? \" btn-outline-warning\" : \" btn-outline-secondary\") }\n                onClick={(e)=>dispatch({type:compositeSettingsActions.SET_COMPOSITE_LAYOUT,layout:7})}>\n                  <div className=\"composite-layout-quarter quarter-left\">\n                    1\n                  </div>\n                  <div className=\"composite-layout-quarter quarter-right\">\n                    2\n                  </div>\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div className=\"row\">\n        <div className=\"col-0 col-md-8\"></div>\n        <div className=\"col-12 col-md-4\">\n          <div className=\"row\">\n            <div className=\"col-10\">\n              { !webrtcPublish.connected &&\n                <button id=\"publish-toggle\" type=\"button\" className=\"btn\"\n                  disabled={compositeSettings.publishStarting }\n                  onClick={(e)=>dispatch(compositeSettingsActions.startPublish())}\n                >Publish</button>\n              }\n              { webrtcPublish.connected &&\n                <button id=\"publish-toggle\" type=\"button\" className=\"btn\"\n                  onClick={(e)=>dispatch(compositeSettingsActions.stopPublish())}\n                >Stop</button>\n              }\n            </div>\n            <div className=\"col-2\">\n              <ShareLink settings={compositeSettings} parameters={compositePublishUrlParameters} prefix={compositePublishUrlParametersPrefix} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n  );\n}\n\n  export default InputLayoutSettingsForm;\n","import { mungeSDPPublish } from './mungeSDP';\n\n// Utilities\n\nconst getStreamInfo = (publishSettings) => {\n\n  return {\n    applicationName:publishSettings.applicationName,\n    streamName:publishSettings.streamName,\n    sessionId:\"[empty]\"\n  };\n}\n\nconst getUserData = (publishSettings) => {\n\n  return { param1: 'value1' };\n}\n\n// PeerConnection Functions\n\nconst peerConnectionCreateOfferSuccess = (description, publishSettings, websocket, peerConnection, callbacks) => {\n\n  console.log(\"peerConnectionCreateOfferSuccess: SDP:\");\n  console.log(description.sdp+'');\n\n  let mungeData = {};\n\n  if (publishSettings.audioBitrate != null)\n    mungeData.audioBitrate = publishSettings.audioBitrate;\n  if (publishSettings.videoBitrate != null)\n    mungeData.videoBitrate = publishSettings.videoBitrate;\n  if (publishSettings.videoFrameRate != null)\n    mungeData.videoFrameRate = publishSettings.videoFrameRate;\n  if (publishSettings.videoCodec != null)\n    mungeData.videoCodec = publishSettings.videoCodec;\n  if (publishSettings.audioCodec != null)\n    mungeData.audioCodec = publishSettings.audioCodec;\n\n  description.sdp = mungeSDPPublish(description.sdp, mungeData);\n\n  console.log(\"peerConnectionCreateOfferSuccess: Setting local description SDP: \");\n  console.log(description.sdp);\n\n  peerConnection\n    .setLocalDescription(description)\n    .then(() => websocket.send('{\"direction\":\"publish\", \"command\":\"sendOffer\", \"streamInfo\":' + JSON.stringify(getStreamInfo(publishSettings)) + ', \"sdp\":' + JSON.stringify(description) + ', \"userData\":' + JSON.stringify(getUserData(publishSettings)) + '}'))\n    .catch((error)=>{\n      let newError = {message:\"Peer connection failed\",...error};\n      peerConnectionOnError(newError,callbacks);\n    });\n}\n\nconst peerConnectionOnError = (error, callbacks) => {\n  console.log('peerConnectionOnError');\n  console.log(error);\n  if (callbacks.onError)\n    callbacks.onError({message:'PeerConnection Error: '+error.message});\n}\n\n\n// Websocket Functions\n\nconst websocketOnOpen = (publishSettings, websocket, callbacks) => {\n\n  let peerConnection;\n\n  try {\n    peerConnection = new RTCPeerConnection();\n\n    peerConnection.onnegotiationneeded = (event) => {\n      peerConnection.createOffer()\n      .then((description) => {\n        peerConnectionCreateOfferSuccess(description,publishSettings,websocket,peerConnection,callbacks);\n      })\n      .catch((e)=>{\n        peerConnectionOnError(e,callbacks);\n      })\n    }\n\n    peerConnection.onconnectionstatechange = (event) => {\n      if (event.currentTarget.connectionState === 'connected')\n      {\n        if (callbacks.onConnectionStateChange)\n          callbacks.onConnectionStateChange({connected:true});\n      }\n      else\n      {\n        if (callbacks.onConnectionStateChange)\n          callbacks.onConnectionStateChange({connected:false});\n      }\n    }\n\n    let audioSender = undefined;\n    let videoSender = undefined;\n    if (publishSettings.audioTrack != null)\n      audioSender = peerConnection.addTrack(publishSettings.audioTrack);\n    if (publishSettings.videoTrack != null)\n      videoSender = peerConnection.addTrack(publishSettings.videoTrack);\n\n    if (callbacks.onSetSenders)\n      callbacks.onSetSenders({audioSender:audioSender,videoSender:videoSender});\n\n    websocket.addEventListener (\"message\", (event) => { websocketOnMessage(event, publishSettings, peerConnection, callbacks); });\n\n  }\n  catch (e) {\n    websocketOnError(e, callbacks);\n  }\n  if (callbacks.onSetPeerConnection)\n    callbacks.onSetPeerConnection({peerConnection:peerConnection});\n}\n\nconst websocketOnMessage = (event, publishSettings, peerConnection, callbacks) => {\n\n  let msgJSON = JSON.parse(event.data);\n  let msgStatus = Number(msgJSON['status']);\n\n  if(msgStatus === 504) {\n    // we need to swallow these because they happen as new streams join and we don't want to break the connection over it\n    console.log(\"New stream connecting to Wowza Streaming Engine\");\n  }else if (msgStatus !== 200) {\n    websocketOnError({message:msgJSON['statusDescription']},callbacks);\n  }\n  else {\n\n    let sdpData = msgJSON['sdp'];\n    if (sdpData !== undefined) {\n\n      let mungeData = {};\n\n      if (publishSettings.audioBitrate !== undefined)\n        mungeData.audioBitrate = publishSettings.audioBitrate;\n      if (publishSettings.videoBitrate !== undefined)\n        mungeData.videoBitrate = publishSettings.videoBitrate;\n\n      console.log(\"Setting remote description SDP:\");\n      console.log(sdpData.sdp);\n\n      peerConnection\n        .setRemoteDescription(new RTCSessionDescription(sdpData),\n          () => {},\n          (error) => { peerConnectionOnError(error,callbacks); }\n        );\n    }\n\n    let iceCandidates = msgJSON['iceCandidates'];\n    if (iceCandidates !== undefined) {\n      for (let index in iceCandidates) {\n        console.log('websocketOnMessage.iceCandidates: ' + iceCandidates[index]);\n        peerConnection.addIceCandidate(new RTCIceCandidate(iceCandidates[index]));\n      }\n    }\n  }\n}\n\nconst websocketOnError = (error, callbacks) => {\n  console.log('Websocket Error');\n  console.log(error);\n  if (callbacks.onError)\n    callbacks.onError({message:'Websocket Error: '+error.message});\n}\n\n// startPublish\n// callbacks:\n// - onError({message:''})\n// - onConnectionStateChange({connected:boolean})\n// - onSetPeerConnection({peerConnection:obj})\n// - onSetWebsocket({websocket:obj})\n// - onSetSenders({audioSender:obj,videoSender:obj})\n\nconst startPublish = (publishSettings, websocket, callbacks) =>\n{\n  try {\n    if (websocket == null)\n    {\n      websocket = new WebSocket (publishSettings.signalingURL);\n    }\n    if (websocket != null)\n    {\n      websocket.binaryType = 'arraybuffer';\n\n      websocket.addEventListener (\"open\", () => { websocketOnOpen(publishSettings, websocket, callbacks); });\n      websocket.addEventListener (\"error\", (error) => { websocketOnError(error, callbacks); });\n\n      if (callbacks.onSetWebsocket)\n        callbacks.onSetWebsocket({websocket:websocket});\n    }\n  }\n  catch (e)\n  {\n    if (callbacks.onError)\n      callbacks.onError(e);\n  }\n\n}\nexport default startPublish;\n","// callbacks:\n// - onSetPeerConnection\n// - onSetWebsocket\n// - onPublishStopped\n\nconst stopPublish = (peerConnection, websocket, callbacks) =>\n{\n  if (peerConnection != null) {\n    peerConnection.close();\n    if (callbacks.onSetPeerConnection)\n      callbacks.onSetPeerConnection({peerConnection:undefined});\n  }\n  if (websocket != null) {\n    websocket.close();\n    if (callbacks.onSetWebsocket)\n      callbacks.onSetWebsocket({websocket:undefined});\n  }\n  if (callbacks.onPublishStopped)\n    callbacks.onPublishStopped();\n}\nexport default stopPublish;\n","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport * as compositeSettingsActions from '../../actions/compositeSettingsActions';\nimport * as WebRTCPublishActions from '../../actions/webrtcPublishActions';\nimport * as ErrorsActions from '../../actions/errorsActions';\n\nimport startPublish from '../../webrtc/startPublish';\nimport stopPublish from '../../webrtc/stopPublish';\n\nconst CompositePublisher = () => {\n\n  const dispatch = useDispatch();\n  const compositeSettings = useSelector ((state) => state.compositeSettings);\n  const webrtcPublish = useSelector ((state) => state.webrtcPublish);\n\n  // Listen for changes in the publish* flags in the compositeSettings store\n  // and stop or stop publishing accordingly\n\n  useEffect(() => {\n\n    if (compositeSettings.publishStart && !compositeSettings.publishStarting && !webrtcPublish.connected)\n    {\n      dispatch({type:compositeSettingsActions.SET_COMPOSITE_FLAGS, publishStart:false, publishStarting:true});\n      startPublish(compositeSettings,webrtcPublish.websocket,{\n        onError: (error) => {\n          dispatch({type:ErrorsActions.SET_ERROR_MESSAGE,message:error.message});\n        },\n        onConnectionStateChange: (result) => {\n          dispatch({type:WebRTCPublishActions.SET_WEBRTC_PUBLISH_CONNECTED,connected:result.connected});\n        },\n        onSetPeerConnection: (result) => {\n          dispatch({type:WebRTCPublishActions.SET_WEBRTC_PUBLISH_PEERCONNECTION,peerConnection:result.peerConnection});\n        },\n        onSetWebsocket: (result) => {\n          dispatch({type:WebRTCPublishActions.SET_WEBRTC_PUBLISH_WEBSOCKET,websocket:result.websocket});\n        },\n        onSetSenders: (senders) => {\n          dispatch({type:WebRTCPublishActions.SET_WEBRTC_PUBLISH_PEERCONNECTION_AUDIO_SENDER,peerConnectionAudioSender:senders.audioSender});\n          dispatch({type:WebRTCPublishActions.SET_WEBRTC_PUBLISH_PEERCONNECTION_VIDEO_SENDER,peerConnectionVideoSender:senders.videoSender});\n        }\n      });\n    }\n    if (compositeSettings.publishStarting && webrtcPublish.connected)\n    {\n      dispatch({type:compositeSettingsActions.SET_COMPOSITE_FLAGS, publishStarting:false});\n    }\n\n    if (compositeSettings.publishStop && !compositeSettings.publishStopping && webrtcPublish.connected)\n    {\n      dispatch({type:compositeSettingsActions.SET_COMPOSITE_FLAGS, publishStop:false, publishStopping:true});\n      stopPublish(webrtcPublish.peerConnection,webrtcPublish.websocket,{\n        onSetPeerConnection: (result) => {\n          dispatch({type:WebRTCPublishActions.SET_WEBRTC_PUBLISH_PEERCONNECTION,peerConnection:result.peerConnection});\n        },\n        onSetWebsocket: (result) => {\n          dispatch({type:WebRTCPublishActions.SET_WEBRTC_PUBLISH_WEBSOCKET,websocket:result.websocket});\n        },\n        onPublishStopped: () => {\n          dispatch({type:WebRTCPublishActions.SET_WEBRTC_PUBLISH_CONNECTED,connected:false});\n        }\n      });\n    }\n    if (compositeSettings.publishStopping && !webrtcPublish.connected)\n    {\n      dispatch({type:compositeSettingsActions.SET_COMPOSITE_FLAGS, publishStopping:false});\n    }\n\n\n  }, [dispatch,compositeSettings,webrtcPublish]);\n\n  return <></>;\n}\n\nexport default CompositePublisher;","import React from 'react';\n\nimport CompositeLiveIndicator from './CompositeLiveIndicator';\nimport CompositePublishSettingsForm from './CompositePublishSettingsForm';\nimport Compositor from './Compositor';\nimport InputLayoutSettingsForm from './InputLayoutSettingsForm';\nimport CompositePublisher from './CompositePublisher';\n\nimport './Composite.css';\n\nimport adapter from 'webrtc-adapter';\n\nconst Composite = () => {\n\n  if (adapter.browserDetails.browser === 'safari')\n  {\n    return (\n      <div className=\"container-fluid mt-3\" id=\"composite-content\">\n        <div id=\"composite-content-inner\">\n          <div className=\"row justify-content-center\">\n            Composite example not supported in Safari\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"container-fluid mt-3\" id=\"composite-content\">\n      <div id=\"composite-content-inner\">\n        <div className=\"row justify-content-center\">\n          <div className=\"col-md-8 col-sm-12\">\n            <div id=\"composite-video-container\" className=\"mb-4\">\n              <Compositor />\n              <CompositeLiveIndicator />\n            </div>\n          </div>\n          <div className=\"col-md-4 col-sm-12\">\n            <CompositePublishSettingsForm />\n          </div>\n        </div>\n        <div className=\"row justify-content-center\">\n          <div className=\"col-sm-12\">\n            <InputLayoutSettingsForm />\n          </div>\n        </div>\n      </div>\n      <CompositePublisher />\n    </div>\n  );\n}\n\nexport default Composite;","// callbacks:\n// - onSetPeerConnection\n// - onSetWebsocket\n// - onPlayStopped\n\nconst stopPlay = (peerConnection, websocket, callbacks) => \n{\n  if (peerConnection != null) {\n    peerConnection.close();\n    if (callbacks.onSetPeerConnection)\n      callbacks.onSetPeerConnection({peerConnection:undefined});\n  }\n  if (websocket != null) {\n    websocket.close();\n    if (callbacks.onSetWebsocket)\n      callbacks.onSetWebsocket({websocket:undefined});\n  }\n  if (callbacks.onPlayStopped)\n    callbacks.onPlayStopped();\n}\nexport default stopPlay;","import { mungeSDPPlay } from './mungeSDP';\nimport stopPlay from './stopPlay';\n\n// Utilities\n\nlet repeaterRetryCount = 0;\nlet sessionId = '[empty]';\n\nconst getStreamInfo = (playSettings) => {\n\n  return {\n    applicationName:playSettings.applicationName,\n    streamName:playSettings.streamName,\n    sessionId:sessionId\n  };\n}\n\nconst getUserData = (playSettings) => {\n\n  return { param1: 'value1' };\n}\n\n// PeerConnection Functions\n\nconst peerConnectionSetRemoteDescriptionSuccess = (description, playSettings, websocket, peerConnection, callbacks) => {\n\n  peerConnection\n    .setLocalDescription(description)\n    .then(() => {\n      websocket.send('{\"direction\":\"play\", \"command\":\"sendResponse\", \"streamInfo\":' + JSON.stringify(getStreamInfo(playSettings)) + ', \"sdp\":' + JSON.stringify(description) + ', \"userData\":' + JSON.stringify(getUserData(playSettings)) + '}');\n    })\n    .catch((error)=>{\n      let newError = {message:\"Peer connection failed\",...error};\n      peerConnectionOnError(newError,callbacks);\n    });\n}\n\nconst peerConnectionOnError = (error, callbacks) => {\n  console.log('peerConnectionOnError');\n  console.log(error);\n  if (callbacks.onError)\n    callbacks.onError({message:'PeerConnection Error: '+error.message});\n}\n\n\n// Websocket Functions\n\nconst websocketOnOpen = (playSettings, websocket, callbacks) => {\n\n  let peerConnection;\n  \n  try {\n    peerConnection = new RTCPeerConnection();\n\n    peerConnection.ontrack = (event) => {\n      if (callbacks.onPeerConnectionOnTrack)\n        callbacks.onPeerConnectionOnTrack(event);\n    }\n\n    peerConnection.onconnectionstatechange = (event) => {\n      if (event.currentTarget.connectionState === 'connected')\n      {\n        if (callbacks.onConnectionStateChange)\n          callbacks.onConnectionStateChange({connected:true});\n      }\n      else\n      {\n        if (callbacks.onConnectionStateChange)\n          callbacks.onConnectionStateChange({connected:false});\n      }\n    }\n\n    websocket.addEventListener (\"message\", (event) => { websocketOnMessage(event, playSettings, peerConnection, websocket, callbacks); });\n\n    websocketSendPlayGetOffer (playSettings, websocket);\n\n  }\n  catch (e) {\n    websocketOnError(e, callbacks);\n  }\n  if (callbacks.onSetPeerConnection)\n    callbacks.onSetPeerConnection({peerConnection:peerConnection});\n}\n\nconst websocketOnMessage = (event, playSettings, peerConnection, websocket, callbacks) => {\n\n  let msgJSON = JSON.parse(event.data);\n  let msgStatus = Number(msgJSON['status']);\n\n  if (msgStatus === 514) // repeater stream not ready\n  {\n    repeaterRetryCount++;\n\n    if (repeaterRetryCount < 10) {\n      setTimeout(websocketSendPlayGetOffer(playSettings, websocket), 500);\n    } else {\n      websocketOnError({message:'Live stream repeater timeout: ' + playSettings.streamName}, callbacks);\n      stopPlay(peerConnection, websocket, callbacks);\n    }\n\n  } else if (msgStatus !== 200) {\n\n    websocketOnError({message:msgJSON['statusDescription']},callbacks);\n    stopPlay(peerConnection, websocket, callbacks);\n\n  } else {\n\n    let streamInfoResponse = msgJSON['streamInfo'];\n    if (streamInfoResponse !== undefined) {\n      sessionId = streamInfoResponse.sessionId;\n    }\n\n    if (msgJSON['sdp'] != null) {\n\n      msgJSON.sdp.sdp = mungeSDPPlay(msgJSON.sdp.sdp);\n\n      console.log(\"SDP Data: \" + msgJSON.sdp.sdp);\n\n      peerConnection\n      .setRemoteDescription(new RTCSessionDescription(msgJSON.sdp))\n      .then(() => peerConnection\n        .createAnswer()\n        .then((description) => peerConnectionSetRemoteDescriptionSuccess(description, playSettings, websocket, peerConnection, callbacks))\n        .catch((err) => peerConnectionOnError(err,callbacks))\n      )\n      .catch((err) => peerConnectionOnError(err,callbacks));\n\n    }\n    let iceCandidates = msgJSON['iceCandidates'];\n    if (iceCandidates != null) {\n      for (let index in iceCandidates) {\n        console.log('iceCandidates: ' + JSON.stringify(iceCandidates[index]));\n        peerConnection.addIceCandidate(new RTCIceCandidate(iceCandidates[index]));\n      }\n    }\n  }\n}\n\nconst websocketOnError = (error, callbacks) => {\n  console.log('Websocket Error');\n  console.log(error);\n  if (callbacks.onError)\n    callbacks.onError({message:'Websocket Error: '+error.message});\n}\n\nconst websocketSendPlayGetOffer = (playSettings, websocket) => {\n  websocket.send('{\"direction\":\"play\", \"command\":\"getOffer\", \"streamInfo\":' + JSON.stringify(getStreamInfo(playSettings)) + ', \"userData\":' + JSON.stringify(getUserData(playSettings)) + '}');\n}\n\n// startPlay\n// callbacks:\n// - onError({message:''})\n// - onPeerConnectionOnTrack({event:obj})\n// - onConnectionStateChange({connected:boolean})\n// - onSetPeerConnection({peerConnection:obj})\n// - onSetWebsocket({websocket:obj})\n\nconst startPlay = (playSettings, websocket, callbacks) => \n{\n  try {\n    if (websocket == null)\n    {\n      websocket = new WebSocket (playSettings.signalingURL);\n    }\n    if (websocket != null)\n    {\n      repeaterRetryCount = 0;\n\n      websocket.binaryType = 'arraybuffer';\n\n      websocket.addEventListener (\"open\", () => { websocketOnOpen(playSettings, websocket, callbacks); });\n      websocket.addEventListener (\"error\", (error) => { websocketOnError(error, callbacks); });\n\n      if (callbacks.onSetWebsocket)\n        callbacks.onSetWebsocket({websocket:websocket});\n    }\n  }\n  catch (e)\n  {\n    if (callbacks.onError)\n      callbacks.onError(e);\n  }\n\n}\nexport default startPlay;","import React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport * as PlaySettingsActions from '../../actions/playSettingsActions';\nimport * as WebRTCPlayActions from '../../actions/webrtcPlayActions';\nimport * as ErrorsActions from '../../actions/errorsActions';\n\nimport startPlay from '../../webrtc/startPlay';\nimport stopPlay from '../../webrtc/stopPlay';\n\nconst Player = () => {\n\n  const videoElement = useRef(null);\n\n  const dispatch = useDispatch();\n  const playSettings = useSelector ((state) => state.playSettings);\n  const { peerConnection, websocket, connected, audioTrack, videoTrack } = useSelector ((state) => state.webrtcPlay);\n\n  // Listen for changes in the play* flags in the playSettings store\n  // and stop or stop playback accordingly\n\n  useEffect(() => {\n\n    if (playSettings.playStart && !playSettings.playStarting && !connected)\n    {\n      dispatch({type:PlaySettingsActions.SET_PLAY_FLAGS, playStart:false, playStarting:true});\n      startPlay(playSettings,websocket,{\n        onError: (error) => {\n          dispatch({type:ErrorsActions.SET_ERROR_MESSAGE,message:error.message});\n        },\n        onConnectionStateChange: (result) => {\n          dispatch({type:WebRTCPlayActions.SET_WEBRTC_PLAY_CONNECTED,connected:result.connected});\n        },\n        onSetPeerConnection: (result) => {\n          dispatch({type:WebRTCPlayActions.SET_WEBRTC_PLAY_PEERCONNECTION,peerConnection:result.peerConnection});\n        },\n        onSetWebsocket: (result) => {\n          dispatch({type:WebRTCPlayActions.SET_WEBRTC_PLAY_WEBSOCKET,websocket:result.websocket});\n        },\n        onPeerConnectionOnTrack: (event) => {\n          if (event.track != null && event.track.kind != null)\n          {\n            if (event.track.kind === 'audio')\n            {\n              dispatch({type:WebRTCPlayActions.SET_WEBRTC_PLAY_AUDIO_TRACK,audioTrack:event.track});\n            }\n            else if (event.track.kind === 'video')\n            {\n              dispatch({type:WebRTCPlayActions.SET_WEBRTC_PLAY_VIDEO_TRACK,videoTrack:event.track});\n            }\n          }\n        }\n      });\n    }\n    if (playSettings.playStarting && connected)\n    {\n      dispatch({type:PlaySettingsActions.SET_PLAY_FLAGS, playStarting:false});\n    }\n\n    if (playSettings.playStop && !playSettings.playStopping && connected)\n    {\n      dispatch({type:PlaySettingsActions.SET_PLAY_FLAGS, playStop:false, playStopping:true});\n      stopPlay(peerConnection, websocket,{\n        onSetPeerConnection: (result) => {\n          dispatch({type:WebRTCPlayActions.SET_WEBRTC_PLAY_PEERCONNECTION,peerConnection:result.peerConnection});\n        },\n        onSetWebsocket: (result) => {\n          dispatch({type:WebRTCPlayActions.SET_WEBRTC_PLAY_WEBSOCKET,websocket:result.websocket});\n        },\n        onPlayStopped: () => {\n          dispatch({type:WebRTCPlayActions.SET_WEBRTC_PLAY_CONNECTED,connected:false});\n        }\n      });\n    }\n    if (playSettings.playStopping && !connected)\n    {\n      dispatch({type:PlaySettingsActions.SET_PLAY_FLAGS, playStopping:false});\n    }\n\n\n  }, [dispatch,videoElement,playSettings,peerConnection,websocket,connected]);\n\n  useEffect(() => {\n\n    if (connected)\n    {\n      let newStream = new MediaStream();\n      if (audioTrack != null)\n        newStream.addTrack(audioTrack);\n\n      if (videoTrack != null)\n        newStream.addTrack(videoTrack);\n\n      if (videoElement != null && videoElement.current != null)\n        videoElement.current.srcObject = newStream;\n    }\n    else\n    {\n      if (videoElement != null && videoElement.current != null)\n        videoElement.current.srcObject = null;\n    }\n\n  }, [audioTrack, videoTrack, connected, videoElement]);\n\n  if (!connected)\n    return null;\n\n  return (\n    <video id=\"player-video\" ref={videoElement} autoPlay playsInline muted controls></video>\n  );\n}\n\nexport default Player;","import React, { useState, useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport QueryString from 'query-string';\nimport Cookies from 'js-cookie';\n\nimport * as PlaySettingsActions from '../../actions/playSettingsActions';\nimport { getCookieValues } from '../../utils/CookieUtils';\nimport CookieName from '../../constants/CookieName';\n\nconst playUrlParametersMap = {\n  \"signalingURL\":\"playSignalingURL\",\n  \"applicationName\":\"playApplicationName\",\n  \"streamName\":\"playStreamName\"\n}\n\nconst PlaySettingsForm = () => {\n\n  const dispatch = useDispatch();\n  const [ initialized, setInitialized ] = useState(false);\n  const playSettings = useSelector ((state) => state.playSettings);\n  const webrtcPlay = useSelector ((state) => state.webrtcPlay);\n\n\n  // load play settings from cookie and URL on mount\n  useEffect(() => {\n\n    let cookieValues = getCookieValues(CookieName);\n    let qs = QueryString.parse(window.location.search);\n    let savedValues = { ...cookieValues, ...qs };\n\n    for (let paramKey in playUrlParametersMap)\n    {\n      if (savedValues[playUrlParametersMap[paramKey]] != null)\n      {\n        switch(playUrlParametersMap[paramKey])\n        {\n          case \"playSignalingURL\":\n            dispatch({type:PlaySettingsActions.SET_PLAY_SIGNALING_URL,signalingURL:savedValues[playUrlParametersMap[paramKey]]});\n            break;\n          case \"playApplicationName\":\n            dispatch({type:PlaySettingsActions.SET_PLAY_APPLICATION_NAME,applicationName:savedValues[playUrlParametersMap[paramKey]]});\n            break;\n          case \"playStreamName\":\n            dispatch({type:PlaySettingsActions.SET_PLAY_STREAM_NAME,streamName:savedValues[playUrlParametersMap[paramKey]]});\n            break;\n          default:\n        }\n      }\n    }\n    setInitialized(true);\n  },[dispatch]);\n      \n  // save values to Cookie\n  useEffect(() => {\n\n    let cookieValues = getCookieValues(CookieName);\n    for (let paramKey in playUrlParametersMap)\n    {\n      if (playSettings[paramKey] != null)\n      {\n        cookieValues[playUrlParametersMap[paramKey]] = playSettings[paramKey];\n      }\n    }\n    Cookies.set(CookieName,escape(JSON.stringify(cookieValues)));\n\n  },[playSettings]);\n\n  if (!initialized)\n    return null;\n\n  return (\n    <div className=\"col-md-4 col-sm-12\" id=\"play-settings\">\n      <form id=\"play-settings-form\">\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <div className=\"form-group\">\n              <label htmlFor=\"playSdpURL\">Signaling URL</label>\n              <input type=\"text\" \n                className=\"form-control\" \n                id=\"playSignalingURL\" \n                name=\"playSignalingURL\" \n                maxLength=\"1024\" \n                placeholder=\"wss://[ssl-certificate-domain-name]/webrtc-session.json\" \n                value={playSettings.signalingURL}\n                onChange={(e)=>dispatch({type:PlaySettingsActions.SET_PLAY_SIGNALING_URL,signalingURL:e.target.value})}\n            />\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-6\">\n            <div className=\"form-group\">\n              <label htmlFor=\"playApplicationName\">Application Name</label>\n              <input type=\"text\" \n                className=\"form-control\" \n                id=\"playApplicationName\" \n                name=\"playApplicationName\" \n                maxLength=\"256\" \n                value={playSettings.applicationName}\n                onChange={(e)=>dispatch({type:PlaySettingsActions.SET_PLAY_APPLICATION_NAME,applicationName:e.target.value})}\n              />\n            </div>\n          </div>\n          <div className=\"col-6\">\n            <div className=\"form-group\">\n              <label htmlFor=\"playStreamName\">Stream Name</label>\n              <input type=\"text\" \n                className=\"form-control\" \n                id=\"playStreamName\" \n                name=\"playStreamName\" \n                maxLength=\"256\" \n                value={playSettings.streamName}\n                onChange={(e)=>dispatch({type:PlaySettingsActions.SET_PLAY_STREAM_NAME,streamName:e.target.value})}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-10\">\n            { !webrtcPlay.connected && \n              <button id=\"play-toggle\" type=\"button\" className=\"btn\"\n                disabled={playSettings.playStarting }\n                onClick={(e)=>dispatch(PlaySettingsActions.startPlay())}\n              >Play</button>\n            }\n            { webrtcPlay.connected &&\n              <button id=\"play-toggle\" type=\"button\" className=\"btn\"\n                onClick={(e)=>dispatch(PlaySettingsActions.stopPlay())}\n              >Stop</button>\n            }\n          </div>\n          {/* <div className=\"col-2\">\n            <button id=\"play-share-link\" type=\"button\" className=\"control-button mt-0\">\n              <img alt=\"\" className=\"noll\" id=\"mute-off\" src={fileCopy} />\n            </button>\n          </div> */}\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default PlaySettingsForm;","import React from 'react';\n\nimport Player from './Player';\nimport PlaySettingsForm from './PlaySettingsForm';\n\nconst Play = () => {\n\n  return (\n    <div className=\"container-fluid mt-3\" id=\"play-content\">\n      <div className=\"row pr-3\">\n        <div className=\"col-md-8 col-sm-12\">\n          <div id=\"play-video-container\">\n            <Player />\n          </div>\n        </div>\n        <PlaySettingsForm />\n      </div>\n    </div>\n  );\n}\n\nexport default Play;","import React, { useEffect, useRef, useState } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport startPlay from '../../webrtc/startPlay';\n\nconst PUBLISH_PLAYER = \"PUBLISH_PLAYER\";\nconst PEER_PLAYER = \"PEER_PLAYER\";\n\nconst PeerPlayer = (props) => {\n\n  const videoElement = useRef(null);\n  const publishSettings = useSelector((state) => state.publishSettings);\n  const { stream } = useSelector ((state) => state.media);\n  const [peerConnection, setPeerConnection] = useState();\n  const [connected, setConnected] = useState(false);\n  const [audioTrack, setAudioTrack] = useState();\n  const [videoTrack, setVideoTrack] = useState();\n  const [playerType, setPlayerType] = useState((props.streamName === publishSettings.streamName) ? PUBLISH_PLAYER : PEER_PLAYER);\n  let mounted = true;\n\n  useEffect(() => {\n    if(mounted){\n      if(playerType === PUBLISH_PLAYER){\n        console.log(\"publish player\");\n        if (stream != null && videoElement.current != null)\n        {\n          videoElement.current.muted = true;\n          videoElement.current.srcObject = stream;\n        }\n      } else {\n        console.log(\"peer player\");\n        let playSettings = {\n          signalingURL: publishSettings.signalingURL,\n          applicationName: publishSettings.applicationName,\n          streamName: props.streamName,\n        }\n        startPlay(playSettings,null,{\n          onPeerConnectionOnTrack: (event) => {\n            console.log(\"getting peer tracks\");\n            if (event.track != null && event.track.kind != null)\n            {\n              if (event.track.kind === 'audio')\n              {\n                setAudioTrack(event.track);\n              }\n              else if (event.track.kind === 'video')\n              {\n                setVideoTrack(event.track);\n              }\n            }\n          },\n          onConnectionStateChange: (result) => {\n            console.log(\"connected state\");\n            console.log(result);\n            if(mounted)\n              setConnected(result.connected);\n          },\n          onError: (e) => {\n            console.log(e);\n          },\n          onSetPeerConnection: (result) => {\n            setPeerConnection(result.peerConnection);\n          }\n        });\n      }\n    }\n    return () => mounted = false;\n  }, [videoElement]);\n\n  useEffect(() => {\n    if ((playerType === PEER_PLAYER) && connected && mounted) {\n      if(connected){\n        let newStream = new MediaStream();\n        if (audioTrack != null)\n          newStream.addTrack(audioTrack);\n\n        if (videoTrack != null)\n          newStream.addTrack(videoTrack);\n\n        if (videoElement != null && videoElement.current != null)\n          videoElement.current.srcObject = newStream;\n      } else {\n        if (videoElement != null && videoElement.current != null)\n          videoElement.current.srcObject = null;\n      }\n    }\n    return () => mounted = false;\n  }, [connected]);\n\n  // if ((playerType == PEER_PLAYER) && !connected)\n  //   return null;\n\n  return(\n    <video id={props.streamName} className=\"meeting-peer-player\" ref={videoElement} autoPlay playsInline ></video>\n  )\n}\nexport default PeerPlayer\n","import React, { useEffect, useState, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport * as PublishSettingsActions from '../../actions/publishSettingsActions';\nimport * as WebRTCMeetingActions from '../../actions/webrtcMeetingActions';\nimport * as ErrorsActions from '../../actions/errorsActions';\nimport PeerPlayer from './PeerPlayer';\n\nimport startPublish from '../../webrtc/startPublish';\nimport stopPublish from '../../webrtc/stopPublish';\n\nconst Meeter = () => {\n\n  const dispatch = useDispatch();\n  const publishSettings = useSelector((state) => state.publishSettings);\n  const webrtcMeeting = useSelector((state) => state.webrtcMeeting);\n  const peerStreams = useRef(webrtcMeeting.peerStreams);\n  const [pollingInterval, setPollingInterval] = useState();\n\n  useEffect(() => {\n    peerStreams.current = webrtcMeeting.peerStreams;\n    if (publishSettings.publishStart && !publishSettings.publishStarting && !webrtcMeeting.connected) {\n      // update flags\n      dispatch({type:PublishSettingsActions.SET_PUBLISH_FLAGS, publishStart:false, publishStarting:true});\n      // Start publishing to Wowza Streaming Engine\n      startPublish(publishSettings,webrtcMeeting.websocket,{\n        onError: (error) => {\n          dispatch({type:ErrorsActions.SET_ERROR_MESSAGE,message:error.message});\n        },\n        onConnectionStateChange: (result) => {\n          dispatch({type:WebRTCMeetingActions.SET_WEBRTC_MEETING_CONNECTED,connected:result.connected});\n        },\n        onSetPeerConnection: (result) => {\n          dispatch({type:WebRTCMeetingActions.SET_WEBRTC_MEETING_PEERCONNECTION,peerConnection:result.peerConnection});\n        },\n        onSetWebsocket: (result) => {\n          dispatch({type:WebRTCMeetingActions.SET_WEBRTC_MEETING_WEBSOCKET,websocket:result.websocket});\n        },\n        onSetSenders: (senders) => {\n          dispatch({type:WebRTCMeetingActions.SET_WEBRTC_MEETING_PEERCONNECTION_AUDIO_SENDER,peerConnectionAudioSender:senders.audioSender});\n          dispatch({type:WebRTCMeetingActions.SET_WEBRTC_MEETING_PEERCONNECTION_VIDEO_SENDER,peerConnectionVideoSender:senders.videoSender});\n        }\n      });\n    }\n    if (publishSettings.publishStarting && webrtcMeeting.connected){\n      dispatch({type:PublishSettingsActions.SET_PUBLISH_FLAGS, publishStarting:false});\n      // insert peer player with cam and mic as source\n      dispatch({type:WebRTCMeetingActions.ADD_PEER_VIDEO_PLAYER,peerStream:{streamName: publishSettings.streamName}})\n      if(webrtcMeeting.websocket){\n        //add new listener\n        webrtcMeeting.websocket.addEventListener(\"message\", (event) => {\n          let msgJSON = JSON.parse(event.data);\n          let msgCommand = msgJSON['command'];\n          if ('getAvailableStreams'.localeCompare(msgCommand) === 0) {\n            if(msgJSON[\"availableStreams\"] !== null){\n              let availableStreams = msgJSON[\"availableStreams\"].filter((stream) => !(stream.streamName.includes(publishSettings.streamName) && stream.streamName.includes(\"_\")))\n              //  filter out this stream from the playback ones since we have a dedicated player for it (not necessary if we want to lump it in with the others)\n              availableStreams = availableStreams.filter((stream) => !(stream.streamName === publishSettings.streamName))\n              for(let i=0;i<availableStreams.length;i++){\n                WebRTCMeetingActions.checkAddPeerStream(peerStreams.current, availableStreams[i].streamName).then((action) => {\n                  dispatch(action);\n                });\n              }\n              for(let i=0;i<peerStreams.current.length;i++){\n                if(!(peerStreams.current[i].streamName === publishSettings.streamName)){\n                  WebRTCMeetingActions.checkRemovePeerStream(availableStreams,peerStreams.current[i].streamName).then((action) => {\n                    dispatch(action);\n                  });\n                }\n              }\n            }\n          }\n        });\n        // set interval\n        setPollingInterval(setInterval(() => {\n          if(webrtcMeeting.websocket){\n            let streamInfo = {\n              applicationName:publishSettings.applicationName,\n              streamName:publishSettings.streamName,\n              sessionId:\"[empty]\"\n            };\n            webrtcMeeting.websocket.send('{\"direction\":\"publish\", \"command\":\"getAvailableStreams\", \"streamInfo\":' + JSON.stringify(streamInfo) + '}');\n          }\n        }, 3000));\n      }\n\n    }\n\n    if (publishSettings.publishStop && !publishSettings.publishStopping && webrtcMeeting.connected)\n    {\n      clearInterval(pollingInterval);\n      dispatch({type:PublishSettingsActions.SET_PUBLISH_FLAGS, publishStop:false, publishStopping:true});\n      dispatch({type:WebRTCMeetingActions.REMOVE_ALL_PLAYERS})\n      stopPublish(webrtcMeeting.peerConnection,webrtcMeeting.websocket,{\n        onSetPeerConnection: (result) => {\n          dispatch({type:WebRTCMeetingActions.SET_WEBRTC_MEETING_PEERCONNECTION,peerConnection:result.peerConnection});\n        },\n        onSetWebsocket: (result) => {\n          dispatch({type:WebRTCMeetingActions.SET_WEBRTC_MEETING_WEBSOCKET,websocket:result.websocket});\n        },\n        onPublishStopped: () => {\n          dispatch({type:WebRTCMeetingActions.SET_WEBRTC_MEETING_CONNECTED,connected:false});\n        }\n      });\n    }\n    if (publishSettings.publishStopping && !webrtcMeeting.connected)\n    {\n      dispatch({type:PublishSettingsActions.SET_PUBLISH_FLAGS, publishStopping:false});\n    }\n  }, [dispatch, publishSettings, webrtcMeeting]);\n\n  return (\n    <div id=\"player-list\">\n    { webrtcMeeting.peerStreams.map((peerStream,key) => {\n      return <PeerPlayer streamName={peerStream.streamName} key={key} />\n    })}\n    </div>\n  )\n}\n\nexport default Meeter;\n","import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { SET_MEDIA_STREAM } from '../../actions/mediaActions';\nimport { SET_PUBLISH_VIDEO_TRACK, SET_PUBLISH_AUDIO_TRACK } from '../../actions/publishSettingsActions';\nimport ShareLink from '../shared/ShareLink'\nimport * as PublishSettingsActions from '../../actions/publishSettingsActions';\nimport { getCookieValues } from '../../utils/CookieUtils';\nimport CookieName from '../../constants/CookieName';\nimport QueryString from 'query-string';\nimport muteImage from '../../images/mic-32px.svg'\nimport unmuteImage from '../../images/mic-off-32px.svg'\nimport videoImage from '../../images/videocam-32px.svg'\nimport videoOffImage from '../../images/videocam-off-32px.svg'\n\nconst MeetingSettingsForm = () => {\n\n  const dispatch = useDispatch();\n  const publishSettings = useSelector ((state) => state.publishSettings);\n  const webrtcMeeting = useSelector ((state) => state.webrtcMeeting);\n  const { cameras, microphones } = useSelector ((state) => state.media);\n\n  const { stream } = useSelector ((state) => state.media);\n  const { videoTracksMap, displayScreenTrack, audioTracksMap } = useSelector ((state) => state.media);\n  const { videoTrack1DeviceId, audioTrackDeviceId } = useSelector ((state) => state.publishSettings);\n  const [ initialized, setInitialized ] = useState(false);\n  // load composite publish settings from cookie and URL on mount\n  useEffect(() => {\n\n    let cookieValues = getCookieValues(CookieName);\n    let qs = QueryString.parse(window.location.search);\n    let savedValues = { ...cookieValues, ...qs };\n\n    for (let param in savedValues)\n    {\n      switch(param)\n      {\n        case ('meeting.signalingURL'):\n          dispatch({type:PublishSettingsActions.SET_PUBLISH_SIGNALING_URL,signalingURL:savedValues[param]});\n          break;\n        case ('meeting.applicationName'):\n          dispatch({type:PublishSettingsActions.SET_PUBLISH_APPLICATION_NAME,applicationName:savedValues[param]});\n          break;\n        default:\n      }\n    }\n    setInitialized(true);\n  },[dispatch]);\n\n  // Handle videoTrack1 changes\n  useEffect(() => {\n    let newStream = new MediaStream();\n    let videoTrack = undefined;\n    if (videoTrack1DeviceId === 'screen' && displayScreenTrack != null)\n    {\n      newStream.addTrack(displayScreenTrack);\n      videoTrack = displayScreenTrack;\n    }\n    else if (videoTrack1DeviceId !== '' && videoTrack1DeviceId !== 'screen' && videoTracksMap[videoTrack1DeviceId] != null)\n    {\n      newStream.addTrack(videoTracksMap[videoTrack1DeviceId]);\n      videoTrack = videoTracksMap[videoTrack1DeviceId];\n    }\n    if (stream != null)\n    {\n      let audioTracks = stream.getAudioTracks();\n      if (audioTracks.length > 0)\n        newStream.addTrack(audioTracks[0]);\n    }\n    dispatch({type:SET_MEDIA_STREAM,stream:newStream});\n    dispatch({type:SET_PUBLISH_VIDEO_TRACK,videoTrack:videoTrack});\n\n  }, [dispatch, videoTracksMap, displayScreenTrack, videoTrack1DeviceId])\n\n  // Handle audioTrack changes\n  useEffect(() => {\n    let newStream = new MediaStream();\n    let audioTrack = undefined;\n    if (audioTrackDeviceId !== '' && audioTracksMap[audioTrackDeviceId] != null)\n    {\n      newStream.addTrack(audioTracksMap[audioTrackDeviceId]);\n      audioTrack = audioTracksMap[audioTrackDeviceId];\n    }\n    if (stream != null)\n    {\n      let videoTracks = stream.getVideoTracks();\n      if (videoTracks.length > 0)\n        newStream.addTrack(videoTracks[0]);\n    }\n    dispatch({type:SET_MEDIA_STREAM,stream:newStream});\n    dispatch({type:SET_PUBLISH_AUDIO_TRACK,audioTrack:audioTrack});\n\n  },[dispatch, audioTracksMap, audioTrackDeviceId]);\n\n  if (!initialized)\n    return null;\n\n  return (\n    <div className=\"col-md-4 col-sm-12\" id=\"meeting-settings\">\n      <form id=\"meeting-settings-form\">\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <div className=\"form-group\">\n              <label htmlFor=\"signalingURL\">Signaling URL</label>\n              <input type=\"text\"\n                className=\"form-control\"\n                id=\"signalingURL\"\n                name=\"signalingURL\"\n                maxLength=\"1024\"\n                placeholder=\"wss://[ssl-certificate-domain-name]/webrtc-session.json\"\n                value={publishSettings.signalingURL}\n                onChange={(e)=>dispatch({type:PublishSettingsActions.SET_PUBLISH_SIGNALING_URL,signalingURL:e.target.value})}\n            />\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-6\">\n            <div className=\"form-group\">\n              <label htmlFor=\"applicationName\">Application Name</label>\n              <input type=\"text\"\n                className=\"form-control\"\n                id=\"applicationName\"\n                name=\"applicationName\"\n                maxLength=\"256\"\n                value={publishSettings.applicationName}\n                onChange={(e)=>dispatch({type:PublishSettingsActions.SET_PUBLISH_APPLICATION_NAME,applicationName:e.target.value})}\n              />\n            </div>\n          </div>\n          <div className=\"col-6\">\n            <div className=\"form-group\">\n              <label htmlFor=\"meetingStreamName\">Stream Name</label>\n              <input type=\"text\"\n                className=\"form-control\"\n                id=\"meetingStreamName\"\n                name=\"meetingStreamName\"\n                maxLength=\"256\"\n                value={publishSettings.streamName}\n                onChange={(e)=>dispatch({type:PublishSettingsActions.SET_PUBLISH_STREAM_NAME,streamName:e.target.value})}\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-10\">\n            <div className=\"form-group\">\n              <label htmlFor=\"camera-list-select\">\n                Input Camera\n              </label>\n              <select id=\"camera-list-select\" className=\"form-control\"\n                value={publishSettings.videoTrack1DeviceId}\n                onChange={(e)=>dispatch({type:PublishSettingsActions.SET_PUBLISH_VIDEO_TRACK1_DEVICEID,videoTrack1DeviceId:e.target.value})}\n              >\n                <option value=''>None</option>\n                { cameras.map((cam,key) => {\n                  return <option key={key} value={cam.deviceId}>{cam.label}</option>\n                })}\n              </select>\n            </div>\n          </div>\n          <div className=\"col-2\">\n            <button id=\"camera-toggle\" type=\"button\" className=\"control-button\" onClick={() => dispatch({type:PublishSettingsActions.TOGGLE_VIDEO_ENABLED})}>\n              <img alt=\"\" className=\"noll\" id=\"video-off\" src={videoImage} style={{display:((publishSettings.videoTrack && publishSettings.videoTrack.enabled)?\"inline\":\"none\")}}/>\n              <img alt=\"\" className=\"noll\" id=\"video-on\" src={videoOffImage} style={{display:((publishSettings.videoTrack && publishSettings.videoTrack.enabled)?\"none\":\"inline\")}}/>\n            </button>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-10\">\n            <div className=\"form-group\">\n              <label htmlFor=\"mic-list-select\">\n                Input Microphone\n              </label>\n              <select id=\"mic-list-select\" className=\"form-control\"\n                value={publishSettings.audioTrackDeviceId}\n                onChange={(e)=>dispatch({type:PublishSettingsActions.SET_PUBLISH_AUDIO_TRACK_DEVICEID,audioTrackDeviceId:e.target.value})}\n              >\n                <option value=''>None</option>\n                { microphones.map((mic,key) => {\n                  return <option key={key} value={mic.deviceId}>{mic.label}</option>\n                })}\n              </select>\n            </div>\n          </div>\n          <div className=\"col-2\">\n            <button id=\"mute-toggle\" type=\"button\" className=\"control-button\" onClick={(e) => dispatch({type:PublishSettingsActions.TOGGLE_AUDIO_ENABLED})}>\n              <img alt=\"\" className=\"noll\" id=\"mute-off\" src={muteImage} style={{display:((publishSettings.audioTrack && publishSettings.audioTrack.enabled)?\"inline\":\"none\")}} />\n              <img alt=\"\" className=\"noll\" id=\"mute-on\" src={unmuteImage} style={{display:((publishSettings.audioTrack && publishSettings.audioTrack.enabled)?\"none\":\"inline\")}}/>\n            </button>\n          </div>\n        </div>\n        <div className=\"row\">\n          <div className=\"col-10\">\n            { !webrtcMeeting.connected &&\n              <button id=\"meeting-toggle\" type=\"button\" className=\"btn\"\n                disabled={publishSettings.publishStarting }\n                // join the meeting\n                onClick={(e)=>dispatch(PublishSettingsActions.startPublish())}\n              >Join</button>\n            }\n            { webrtcMeeting.connected &&\n              <button id=\"meeting-toggle\" type=\"button\" className=\"btn\"\n                // leave the meeting\n                onClick={(e)=>dispatch(PublishSettingsActions.stopPublish())}\n              >Leave</button>\n            }\n          </div>\n          <div className=\"col-2\">\n            <ShareLink settings={publishSettings} parameters={[\"signalingURL\",\"applicationName\"]} prefix={\"meeting.\"} />\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default MeetingSettingsForm;\n","import React from 'react';\n\nimport Meeter from './Meeter'\nimport MeetingSettingsForm from './MeetingSettingsForm';\n\nconst Meeting = () => {\n\n  return (\n    <div className=\"row justify-content-center\">\n      <div className=\"col-md-8 col-sm-12\">\n        <div id=\"peer-video-container\">\n          <Meeter />\n        </div>\n      </div>\n      <MeetingSettingsForm />\n    </div>\n  );\n}\n\nexport default Meeting;\n","const getUserMedia = (constraints) => {\n  return new Promise((resolve,reject) => {\n\n    if (navigator.mediaDevices.getUserMedia) {\n\n      navigator.mediaDevices.getUserMedia(constraints)\n        .then((stream) => { resolve(stream); })\n        .catch((error)=> {\n          reject(error);\n        });\n\n    } else if (navigator.getUserMedia) {\n\n      navigator.getUserMedia(\n        constraints, \n        (stream) => { resolve(stream); },\n        (error) => { reject(error); }\n      );\n\n    } else {\n      reject({message:\"Your browser does not support WebRTC\"});\n    }\n\n  });\n}\nexport default getUserMedia;","const getDisplayStream = () => {\n  return new Promise ((resolve, reject) => {\n\n    function getDisplaySuccess (stream) {\n      resolve(stream);\n    };\n\n    let constraints = {video:true};\n\n    if (navigator.getDisplayMedia) {\n\n      navigator.getDisplayMedia(constraints)\n      .then((stream) => { getDisplaySuccess(stream); })\n      .catch((e) => { reject(e); });\n\n    } else if (navigator.mediaDevices.getDisplayMedia) {\n\n      navigator.mediaDevices.getDisplayMedia(constraints)\n      .then((stream) => { getDisplaySuccess(stream); })\n      .catch((e) => { reject(e); });\n\n    } else {\n\n      constraints = {video: {mediaSource: 'screen'}};\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then((stream) => { getDisplaySuccess(stream); })\n      .catch((e) => { reject(e); });\n\n    }\n  });\n}\nexport default getDisplayStream;","import React, { useEffect, useRef } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport { videoConstraintsByFrameSize } from '../../constants/PublishOptions';\n\nimport * as MediaActions from '../../actions/mediaActions';\nimport * as PublishSettingsActions from '../../actions/publishSettingsActions';\n\nimport getUserMedia from '../../webrtc/getUserMedia';\nimport getDisplayScreen from '../../webrtc/getDisplayScreen';\n\nconst getPermissions = async (dispatch) => {\n\n  let gotPermissions = false;\n  try\n  {\n    await getUserMedia({video:videoConstraintsByFrameSize.default,audio:true});\n    gotPermissions = true;\n  }\n  catch(e) {}\n  dispatch({type:MediaActions.SET_MEDIA_GOT_PERMISSIONS,gotPermissions:gotPermissions});\n}\n\nconst loadUserMediaForCameras  = async (dispatch, cameras, videoTracksMap) => {\n\n  let newVideoTracksMap = {...videoTracksMap};\n  for (let i = 0; i < cameras.length; i++)\n  {\n    let constraints = { video:videoConstraintsByFrameSize.default, audio:false };\n    constraints.video.deviceId = cameras[i].deviceId;\n\n    try {\n\n      let stream = await getUserMedia(constraints);\n      let videoTracks = stream.getVideoTracks();\n      if (videoTracks.length > 0) {\n        newVideoTracksMap[cameras[i].deviceId] = videoTracks[0];\n      }\n\n    } catch (e) {\n    }\n  }\n  dispatch({type:MediaActions.SET_MEDIA_TRACKS,videoTracksMap:newVideoTracksMap});\n}\n\nconst onScreenShareEnded = (dispatch) => {\n  console.log('onScreenShareEnded');\n  dispatch({type:PublishSettingsActions.SET_PUBLISH_VIDEO_TRACK1_DEVICEID,videoTrack1DeviceId:'none'});\n  dispatch({type:MediaActions.SET_MEDIA_SCREEN_SHARE_ENDED});\n}\n\nconst loadDisplayScreenTrack = async (dispatch) => {\n\n  getDisplayScreen()\n  .then( (stream) => {\n    let screenTrack = stream.getVideoTracks()[0];\n    screenTrack.onended = () => { onScreenShareEnded(dispatch); };\n    dispatch({type:MediaActions.SET_MEDIA_TRACKS,displayScreenTrack:screenTrack});\n  })\n  .catch( (e) => {\n\n  });\n}\n\nconst loadUserMediaForMicrophones = async (dispatch, microphones, audioTracksMap) => {\n\n  let newAudioTracksMap = {...audioTracksMap};\n  for (let i = 0; i < microphones.length; i++)\n  {\n    let constraints = { audio:{} };\n    constraints.audio.deviceId = microphones[i].deviceId;\n\n    try {\n\n      let stream = await getUserMedia(constraints);\n      let audioTracks = stream.getAudioTracks();\n      if (audioTracks.length > 0) {\n        newAudioTracksMap[microphones[i].deviceId] = audioTracks[0];\n      }\n\n    } catch (e) {\n    }\n  }\n  dispatch({type:MediaActions.SET_MEDIA_TRACKS,audioTracksMap:newAudioTracksMap});\n}\n\nconst CompositorUserMedia = () => {\n\n  const dispatch = useDispatch();\n  const { gotPermissions, cameras, microphones, videoTracksMap, audioTracksMap, displayScreenTrack } = useSelector((state) => state.media);\n  const { videoTrack1DeviceId : publishVideoTrack1DeviceId } = useSelector((state) => state.publishSettings);\n  const { videoTrack1DeviceId : compositeVideoTrack1DeviceId } = useSelector((state) => state.compositeSettings);\n  const videoTracksMapRef = useRef(videoTracksMap);\n  const audioTracksMapRef = useRef(audioTracksMap);\n\n  // get permissions on page load\n  useEffect(() => {\n    getPermissions(dispatch);\n  }, [dispatch]);\n\n  // get video track for each camera\n  useEffect(() => {\n    if (gotPermissions)\n      loadUserMediaForCameras(dispatch, cameras, videoTracksMapRef.current);\n  }, [dispatch,gotPermissions,cameras]);\n\n  // get audio track for each microphone\n  useEffect(() => {\n    if (gotPermissions)\n      loadUserMediaForMicrophones(dispatch, microphones, audioTracksMapRef.current);\n  }, [dispatch,gotPermissions,microphones]);\n\n  // start screen sharing for 'publish' example\n  useEffect(() => {\n    if (publishVideoTrack1DeviceId === 'screen' && displayScreenTrack == null) {\n      loadDisplayScreenTrack(dispatch);\n    }\n  }, [dispatch,publishVideoTrack1DeviceId, displayScreenTrack])\n\n  // start screen sharing for 'composite' example\n  useEffect(() => {\n    if (compositeVideoTrack1DeviceId === 'screen' && displayScreenTrack == null) {\n      loadDisplayScreenTrack(dispatch);\n    }\n  }, [dispatch,compositeVideoTrack1DeviceId, displayScreenTrack])\n\n\n  return <></>;\n}\n\nexport default CompositorUserMedia;","const ErrorMessages = {\n  loadingUserMedia: \"Error loading user media\",\n  loadingUserDevices: \"Error loading cameras and microphones\"\n}\n\nexport default ErrorMessages;","const getDevices = () => {\n  return new Promise((resolve,reject) => {\n\n    navigator.mediaDevices.enumerateDevices()\n    .then((devices) => {\n\n      let resolveObj = { cameras:[], microphones:[] };\n\n      for (var i = 0; i < devices.length; i++) {\n        if (devices[i].kind === 'videoinput') {\n          resolveObj.cameras.push(devices[i]);\n        } else if (devices[i].kind === 'audioinput') {\n          resolveObj.microphones.push(devices[i]);\n        }\n      }\n      resolve(resolveObj);\n    })\n    .catch((e) => {\n        reject(e);\n    });\n\n  });\n}\nexport default getDevices;","import React, { useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\n\nimport ErrorMessages from '../../constants/ErrorMessages';\n\nimport * as ErrorsActions from '../../actions/errorsActions';\nimport * as MediaActions from '../../actions/mediaActions';\nimport * as PublishSettingsActions from '../../actions/publishSettingsActions';\n\nimport getDevices from '../../webrtc/getDevices';\n\n\nconst loadDevices = async (dispatch) => {\n\n  dispatch({type:MediaActions.SET_MEDIA_DEVICES_STATE,devicesLoading:true});\n\n  try {\n    let { cameras, microphones } = await getDevices();\n    dispatch ({type:MediaActions.SET_MEDIA_CAMERAS, cameras});\n    dispatch ({type:MediaActions.SET_MEDIA_MICROPHONES, microphones});\n    dispatch ({type:MediaActions.SET_MEDIA_DEVICES_STATE, devicesLoading:false, devicesLoaded:true});\n    if (cameras.length > 0)\n      dispatch ({type:PublishSettingsActions.SET_PUBLISH_VIDEO_TRACK1_DEVICEID,videoTrack1DeviceId:cameras[0].deviceId});\n    if (microphones.length > 0)\n      dispatch ({type:PublishSettingsActions.SET_PUBLISH_AUDIO_TRACK_DEVICEID,audioTrackDeviceId:microphones[0].deviceId});\n  }\n  catch (error) {\n    console.log(error);\n    dispatch ({type:ErrorsActions.SET_ERROR_MESSAGE, message:ErrorMessages.loadingUserDevices + ': ' + error.message});\n  }\n}\n\nconst Devices = () => {\n\n  const dispatch = useDispatch();\n  const { gotPermissions } = useSelector((state) => state.media);\n\n  useEffect(() => {\n\n    if (gotPermissions)\n      loadDevices(dispatch);\n\n  }, [dispatch,gotPermissions]);\n\n\n  return <></>;\n}\n\nexport default Devices;","import React from 'react';\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route\n} from \"react-router-dom\";\nimport { Provider as StoreProvider } from \"react-redux\";\n\nimport store from './store'\n\nimport Nav from './components/shell/Nav';\nimport Errors from './components/shell/Errors';\nimport Composite from './components/composite/Composite';\nimport Play from './components/play/Play';\n// import Publish from './components/publish/Publish';\nimport Meeting from './components/meeting/Meeting';\nimport CompositorUserMedia from './components/media/CompositorUserMedia';\nimport Devices from './components/media/Devices';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\n\nconst App = () => {\n\n  return (\n    <StoreProvider store={store}>\n      <CompositorUserMedia />\n      <Devices />\n      <Router basename={process.env.REACT_APP_BASENAME}>\n        <div className=\"container-fluid\">\n          <Nav />\n          <Errors />\n        </div>\n        <Switch>\n          <Route path=\"/play\">\n            <Play />\n          </Route>\n          <Route path=\"/meeting\">\n            <Meeting />\n          </Route>\n          <Route path=\"/composite\">\n            <Composite />\n          </Route>\n          <Route path=\"/\">\n            <Composite />\n          </Route>\n        </Switch>\n      </Router>\n    </StoreProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n      <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}